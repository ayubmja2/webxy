import{Q as P,k as c,o as d,c as R,w as k,b as s,a as T,e as B,i as p,m as f,f as m,l as w,F as q,t as I,g as Q,q as y,J as z,s as G,x as L}from"./app-BnIOzztU.js";import{_ as O,P as H}from"./Panel-uWPaJEGw.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DbP6AOTP.js";const r=v=>(G("data-v-97d03579"),v=v(),L(),v),K={class:"container mx-auto p-4"},j=r(()=>s("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),W={class:"mb-4"},X=r(()=>s("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),Y={class:"mb-4"},Z=r(()=>s("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),ee={class:"mb-4"},te=r(()=>s("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),oe={class:"mb-4"},se=r(()=>s("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),ne=["onUpdate:modelValue"],ae=["value"],le=["onUpdate:modelValue"],ie=["value"],re=["onClick"],ue={key:0,class:"text-red-500 text-sm mt-2"},de={class:"mb-4"},ce=r(()=>s("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),pe=r(()=>s("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),me={__name:"Edit",setup(v){const{props:V}=P(),u=c(V.recipe||{}),x=c(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),F=c(["1/4","1/2","1/8","1/16","1","2","3","4","5"]);function $(e){if(!e||e%1===0)return e;const o=1e-6;let t=1,l=0,a=0,_=1,b=e;do{let g=Math.floor(b),h=t;t=g*t+l,l=h,h=a,a=g*a+_,_=h,b=1/(b-g)}while(Math.abs(e-t/a)>e*o);return t%a===0?`${t/a}`:`${t}/${a}`}function C(e){const o=e.split(" ");if(o.length===2){const t=parseFloat(o[0]),l=o[1],[a,_]=l.split("/").map(Number);return t+a/_}else{const[t,l]=e.split("/").map(Number);return l?t/l:parseFloat(e)}}function E(e){const o=parseFloat(e);return!isNaN(o)&&o%1!==0?$(o):e}const n=c({title:u.value.title||"",description:u.value.description||"",instruction:u.value.instruction||"",image_url:null,ingredients:(u.value.ingredients||[]).map(e=>({name:e.name,quantity:e.pivot.quantity,unit:e.pivot.unit}))}),i=c(""),N=()=>{n.value.ingredients.push({name:"",quantity:F.value[0],unit:x.value[0]}),i.value=""},S=e=>{n.value.ingredients.length>1?n.value.ingredients.splice(e,1):i.value="At least one ingredient is required."},U=e=>{n.value.image_url=e.target.files[0]},D=()=>{let e=!0;return i.value="",n.value.ingredients.length<1&&(i.value="At least one ingredient is required.",e=!1),n.value.ingredients.forEach(o=>{(!o.name||!o.quantity||!o.unit)&&(i.value="All ingredient fields are required.",e=!1)}),e},A=()=>{if(!D())return;const e=new FormData;e.append("title",n.value.title),e.append("description",n.value.description),e.append("instruction",n.value.instruction),n.value.image_url&&e.append("image_url",n.value.image_url),e.append("_method","PATCH"),n.value.ingredients.forEach((o,t)=>{e.append(`ingredients[${t}][name]`,o.name),e.append(`ingredients[${t}][quantity]`,C(o.quantity)),e.append(`ingredients[${t}][unit]`,o.unit)}),y.post(`/recipes/${u.value.id}`,e)},M=()=>{confirm("Are you sure you want to delete this recipe")&&y.delete(`/recipes/${u.value.id}`,{onSuccess:()=>{y.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,o)=>(d(),R(O,null,{default:k(()=>[s("div",K,[T(H,null,{default:k(()=>[j,s("form",{onSubmit:B(A,["prevent"])},[s("div",W,[X,p(s("input",{type:"text",id:"title","onUpdate:modelValue":o[0]||(o[0]=t=>n.value.title=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,n.value.title]])]),s("div",Y,[Z,p(s("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=t=>n.value.description=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,n.value.description]])]),s("div",ee,[te,p(s("textarea",{id:"instruction","onUpdate:modelValue":o[2]||(o[2]=t=>n.value.instruction=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,n.value.instruction]])]),s("div",oe,[se,(d(!0),m(q,null,w(n.value.ingredients,(t,l)=>(d(),m("div",{key:l,class:"flex items-center mb-2"},[p(s("input",{type:"text","onUpdate:modelValue":a=>t.name=a,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,ne),[[f,t.name]]),s("input",{type:"text",value:E(t.quantity),placeholder:"e.g., 1 1/2",class:"mr-4 p-2 rounded-md border-gray-300 shadow-sm"},null,8,ae),p(s("select",{"onUpdate:modelValue":a=>t.unit=a,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(d(!0),m(q,null,w(x.value,a=>(d(),m("option",{key:a,value:a},I(a),9,ie))),128))],8,le),[[z,t.unit]]),s("button",{type:"button",onClick:a=>S(l),class:"text-red-500"},"Remove",8,re)]))),128)),s("button",{type:"button",onClick:N,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),i.value?(d(),m("div",ue,I(i.value),1)):Q("",!0)]),s("div",de,[ce,s("input",{type:"file",id:"image",onChange:U,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),pe,s("button",{type:"button",onClick:M,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},ge=J(me,[["__scopeId","data-v-97d03579"]]);export{ge as default};
