import{Q as M,k as p,o as d,c as N,w as y,b as t,a as R,e as P,i as u,m,f as v,l as x,F as k,t as w,g as B,q as f,J as T,s as Q,x as z}from"./app-DOJmsywx.js";import{_ as G,P as L}from"./Panel-BAiMVikm.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DjPChDG9.js";const i=_=>(Q("data-v-7347071e"),_=_(),z(),_),H={class:"container mx-auto p-4"},J=i(()=>t("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),K={class:"mb-4"},j=i(()=>t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),W={class:"mb-4"},X=i(()=>t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),Y={class:"mb-4"},Z=i(()=>t("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),ee={class:"mb-4"},te=i(()=>t("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),oe=["onUpdate:modelValue"],se=["onUpdate:modelValue"],ae=["onUpdate:modelValue"],le=["value"],ne=["onClick"],ie={key:0,class:"text-red-500 text-sm mt-2"},re={class:"mb-4"},de=i(()=>t("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),ue=i(()=>t("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),ce={__name:"Edit",setup(_){const{props:q}=M(),r=p(q.recipe||{}),g=p(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),V=p(["1/4","1/2","1/8","1/16","1","2","3","4","5"]);function I(e){let o=1,c=0,l=0,b=e;do{let h=Math.floor(b),D=o;o=h*o+c,c=D,b=1/(b-h)}while(Math.abs(e-o/l)>e*1e-6);return`${o}/${l}`}function U(e){const a=parseFloat(e);return!isNaN(a)&&a%1!==0?I(a):e}const s=p({title:r.value.title||"",description:r.value.description||"",instruction:r.value.instruction||"",image_url:null,ingredients:(r.value.ingredients||[]).map(e=>({name:e.name,quantity:U(e.pivot.quantity),unit:e.pivot.unit}))}),n=p(""),C=()=>{s.value.ingredients.push({name:"",quantity:V.value[0],unit:g.value[0]}),n.value=""},E=e=>{s.value.ingredients.length>1?s.value.ingredients.splice(e,1):n.value="At least one ingredient is required."},$=e=>{s.value.image_url=e.target.files[0]},F=()=>{let e=!0;return n.value="",s.value.ingredients.length<1&&(n.value="At least one ingredient is required.",e=!1),s.value.ingredients.forEach(a=>{(!a.name||!a.quantity||!a.unit)&&(n.value="All ingredient fields are required.",e=!1)}),e},S=()=>{if(!F())return;const e=new FormData;e.append("title",s.value.title),e.append("description",s.value.description),e.append("instruction",s.value.instruction),s.value.image_url&&e.append("image_url",s.value.image_url),e.append("_method","PATCH"),s.value.ingredients.forEach((a,o)=>{e.append(`ingredients[${o}][name]`,a.name),e.append(`ingredients[${o}][quantity]`,a.quantity),e.append(`ingredients[${o}][unit]`,a.unit)}),f.post(`/recipes/${r.value.id}`,e)},A=()=>{confirm("Are you sure you want to delete this recipe")&&f.delete(`/recipes/${r.value.id}`,{onSuccess:()=>{f.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,a)=>(d(),N(G,null,{default:y(()=>[t("div",H,[R(L,null,{default:y(()=>[J,t("form",{onSubmit:P(S,["prevent"])},[t("div",K,[j,u(t("input",{type:"text",id:"title","onUpdate:modelValue":a[0]||(a[0]=o=>s.value.title=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[m,s.value.title]])]),t("div",W,[X,u(t("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=o=>s.value.description=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[m,s.value.description]])]),t("div",Y,[Z,u(t("textarea",{id:"instruction","onUpdate:modelValue":a[2]||(a[2]=o=>s.value.instruction=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[m,s.value.instruction]])]),t("div",ee,[te,(d(!0),v(k,null,x(s.value.ingredients,(o,c)=>(d(),v("div",{key:c,class:"flex items-center mb-2"},[u(t("input",{type:"text","onUpdate:modelValue":l=>o.name=l,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,oe),[[m,o.name]]),u(t("input",{type:"text","onUpdate:modelValue":l=>o.quantity=l,placeholder:"e.g., 1 1/2",class:"mr-4 p-2 rounded-md border-gray-300 shadow-sm"},null,8,se),[[m,o.quantity]]),u(t("select",{"onUpdate:modelValue":l=>o.unit=l,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(d(!0),v(k,null,x(g.value,l=>(d(),v("option",{key:l,value:l},w(l),9,le))),128))],8,ae),[[T,o.unit]]),t("button",{type:"button",onClick:l=>E(c),class:"text-red-500"},"Remove",8,ne)]))),128)),t("button",{type:"button",onClick:C,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),n.value?(d(),v("div",ie,w(n.value),1)):B("",!0)]),t("div",re,[de,t("input",{type:"file",id:"image",onChange:$,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),ue,t("button",{type:"button",onClick:A,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},be=O(ce,[["__scopeId","data-v-7347071e"]]);export{be as default};
