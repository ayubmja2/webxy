import{Q as S,k as c,o as r,c as $,w as f,b as t,a as A,e as D,i as u,m,f as p,l as h,F as y,t as x,g as F,q as _,J as R,s as P,x as B}from"./app-D-iIkmrA.js";import{_ as M,P as N}from"./Panel-FwKzW5NT.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CnoUHAGq.js";const i=v=>(P("data-v-c4ace122"),v=v(),B(),v),z={class:"container mx-auto p-4"},G=i(()=>t("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),L={class:"mb-4"},O=i(()=>t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),Q={class:"mb-4"},H=i(()=>t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),J={class:"mb-4"},K=i(()=>t("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),j={class:"mb-4"},W=i(()=>t("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),X=["onUpdate:modelValue"],Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"],ee=["value"],te=["onClick"],se={key:0,class:"text-red-500 text-sm mt-2"},oe={class:"mb-4"},ae=i(()=>t("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),le=i(()=>t("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),ne={__name:"Edit",setup(v){const{props:k}=S(),d=c(k.recipe||{}),b=c(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),w=c(["1/4","1/2","1/8","1/16","1","2","3","4","5"]),s=c({title:d.value.title||"",description:d.value.description||"",instruction:d.value.instruction||"",image_url:null,ingredients:(d.value.ingredients||[]).map(e=>({name:e.name,quantity:e.pivot.quantity,unit:e.pivot.unit}))}),n=c(""),q=()=>{s.value.ingredients.push({name:"",quantity:w.value[0],unit:b.value[0]}),n.value=""},V=e=>{s.value.ingredients.length>1?s.value.ingredients.splice(e,1):n.value="At least one ingredient is required."},I=e=>{s.value.image_url=e.target.files[0]},U=()=>{let e=!0;return n.value="",s.value.ingredients.length<1&&(n.value="At least one ingredient is required.",e=!1),s.value.ingredients.forEach(a=>{(!a.name||!a.quantity||!a.unit)&&(n.value="All ingredient fields are required.",e=!1)}),e},C=()=>{if(!U())return;const e=new FormData;e.append("title",s.value.title),e.append("description",s.value.description),e.append("instruction",s.value.instruction),s.value.image_url&&e.append("image_url",s.value.image_url),e.append("_method","PATCH"),s.value.ingredients.forEach((a,o)=>{e.append(`ingredients[${o}][name]`,a.name),e.append(`ingredients[${o}][quantity]`,a.quantity),e.append(`ingredients[${o}][unit]`,a.unit)}),_.post(`/recipes/${d.value.id}`,e)},E=()=>{confirm("Are you sure you want to delete this recipe")&&_.delete(`/recipes/${d.value.id}`,{onSuccess:()=>{_.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,a)=>(r(),$(M,null,{default:f(()=>[t("div",z,[A(N,null,{default:f(()=>[G,t("form",{onSubmit:D(C,["prevent"])},[t("div",L,[O,u(t("input",{type:"text",id:"title","onUpdate:modelValue":a[0]||(a[0]=o=>s.value.title=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[m,s.value.title]])]),t("div",Q,[H,u(t("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=o=>s.value.description=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[m,s.value.description]])]),t("div",J,[K,u(t("textarea",{id:"instruction","onUpdate:modelValue":a[2]||(a[2]=o=>s.value.instruction=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[m,s.value.instruction]])]),t("div",j,[W,(r(!0),p(y,null,h(s.value.ingredients,(o,g)=>(r(),p("div",{key:g,class:"flex items-center mb-2"},[u(t("input",{type:"text","onUpdate:modelValue":l=>o.name=l,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,X),[[m,o.name]]),u(t("input",{type:"text","onUpdate:modelValue":l=>o.quantity=l,placeholder:"e.g., 1 1/2",class:"mr-4 p-2 rounded-md border-gray-300 shadow-sm"},null,8,Y),[[m,o.quantity]]),u(t("select",{"onUpdate:modelValue":l=>o.unit=l,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(r(!0),p(y,null,h(b.value,l=>(r(),p("option",{key:l,value:l},x(l),9,ee))),128))],8,Z),[[R,o.unit]]),t("button",{type:"button",onClick:l=>V(g),class:"text-red-500"},"Remove",8,te)]))),128)),t("button",{type:"button",onClick:q,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),n.value?(r(),p("div",se,x(n.value),1)):F("",!0)]),t("div",oe,[ae,t("input",{type:"file",id:"image",onChange:I,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),le,t("button",{type:"button",onClick:E,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},ce=T(ne,[["__scopeId","data-v-c4ace122"]]);export{ce as default};
