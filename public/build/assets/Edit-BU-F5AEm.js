import{Q as A,k as f,o as p,c as R,w as k,b as s,a as T,e as B,i as _,m as g,f as v,l as w,F as $,t as q,g as Q,q as y,J as z,s as G,x as L}from"./app-k8_MMULm.js";import{_ as O}from"./AuthenticatedLayout-D-7ZbPxm.js";import{P as H}from"./Panel-C5KvejGX.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CSp0Au1j.js";const u=b=>(G("data-v-eb87372f"),b=b(),L(),b),K={class:"container mx-auto p-4"},j=u(()=>s("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),W={class:"mb-4"},X=u(()=>s("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),Y={class:"mb-4"},Z=u(()=>s("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),ee={class:"mb-4"},te=u(()=>s("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),oe={class:"mb-4"},se=u(()=>s("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),ne=["onUpdate:modelValue"],ae=["value"],le=["onUpdate:modelValue"],ie=["value"],re=["onClick"],ue={key:0,class:"text-red-500 text-sm mt-2"},de={class:"mb-4"},ce=u(()=>s("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),pe=u(()=>s("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),me={__name:"Edit",setup(b){const{props:I}=A(),d=f(I.recipe||{}),x=f(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),V=f(["1/4","1/2","1/8","1/16","1","2","3","4","5","6"]);function F(e){if(!e||e%1===0)return e.toString();const o=1e-6;let t=1,l=0,n=0,m=1,h=e;do{let r=Math.floor(h),c=t;t=r*t+l,l=c,c=n,n=r*n+m,m=c,h=1/(h-r)}while(Math.abs(e-t/n)>e*o);if(t%n===0)return`${t/n}`;{const r=Math.floor(t/n),c=t%n;return r===0?`${t}/${n}`:c===0?`${r}`:`${r} ${c}/${n}`}}function C(e){let o=e.split(" "),t=0,l=e;o.length>1&&(t=parseFloat(o[0]),l=o[1]);const[n,m]=l.split("/").map(Number);return m?t+n/m:parseFloat(e)}function E(e){if(typeof e=="string"&&e.includes(" "))return e;const o=parseFloat(e);return!isNaN(o)&&o%1!==0?F(o):e}const a=f({title:d.value.title||"",description:d.value.description||"",instruction:d.value.instruction||"",image_url:null,ingredients:(d.value.ingredients||[]).map(e=>({name:e.name,quantity:e.pivot.quantity,unit:e.pivot.unit}))}),i=f(""),S=()=>{a.value.ingredients.push({name:"",quantity:V.value[0],unit:x.value[0]}),i.value=""},P=e=>{a.value.ingredients.length>1?a.value.ingredients.splice(e,1):i.value="At least one ingredient is required."},U=e=>{a.value.image_url=e.target.files[0]},D=()=>{let e=!0;return i.value="",a.value.ingredients.length<1&&(i.value="At least one ingredient is required.",e=!1),a.value.ingredients.forEach(o=>{(!o.name||!o.quantity||!o.unit)&&(i.value="All ingredient fields are required.",e=!1)}),e},M=()=>{if(!D())return;const e=new FormData;e.append("title",a.value.title),e.append("description",a.value.description),e.append("instruction",a.value.instruction),a.value.image_url&&e.append("image_url",a.value.image_url),e.append("_method","PATCH"),a.value.ingredients.forEach((o,t)=>{e.append(`ingredients[${t}][name]`,o.name),e.append(`ingredients[${t}][quantity]`,C(o.quantity)),e.append(`ingredients[${t}][unit]`,o.unit)}),y.post(`/recipes/${d.value.id}`,e)},N=()=>{confirm("Are you sure you want to delete this recipe")&&y.delete(`/recipes/${d.value.id}`,{onSuccess:()=>{y.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,o)=>(p(),R(O,null,{default:k(()=>[s("div",K,[T(H,null,{default:k(()=>[j,s("form",{onSubmit:B(M,["prevent"])},[s("div",W,[X,_(s("input",{type:"text",id:"title","onUpdate:modelValue":o[0]||(o[0]=t=>a.value.title=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[g,a.value.title]])]),s("div",Y,[Z,_(s("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=t=>a.value.description=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[g,a.value.description]])]),s("div",ee,[te,_(s("textarea",{id:"instruction","onUpdate:modelValue":o[2]||(o[2]=t=>a.value.instruction=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[g,a.value.instruction]])]),s("div",oe,[se,(p(!0),v($,null,w(a.value.ingredients,(t,l)=>(p(),v("div",{key:l,class:"flex items-center mb-2"},[_(s("input",{type:"text","onUpdate:modelValue":n=>t.name=n,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,ne),[[g,t.name]]),s("input",{type:"text",value:E(t.quantity),placeholder:"e.g., 1 1/2",class:"mr-4 p-2 rounded-md border-gray-300 shadow-sm"},null,8,ae),_(s("select",{"onUpdate:modelValue":n=>t.unit=n,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(p(!0),v($,null,w(x.value,n=>(p(),v("option",{key:n,value:n},q(n),9,ie))),128))],8,le),[[z,t.unit]]),s("button",{type:"button",onClick:n=>P(l),class:"text-red-500"},"Remove",8,re)]))),128)),s("button",{type:"button",onClick:S,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),i.value?(p(),v("div",ue,q(i.value),1)):Q("",!0)]),s("div",de,[ce,s("input",{type:"file",id:"image",onChange:U,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),pe,s("button",{type:"button",onClick:N,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},he=J(me,[["__scopeId","data-v-eb87372f"]]);export{he as default};
