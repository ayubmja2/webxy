import{Q as M,k as p,o as d,c as R,w as k,b as o,a as T,e as B,i as m,m as f,f as v,l as w,F as q,t as I,g as Q,q as y,J as z,s as G,x as L}from"./app-BU0xrf4Q.js";import{_ as O,P as H}from"./Panel-CeMKWKD_.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BWS2mGwc.js";const r=_=>(G("data-v-485caaeb"),_=_(),L(),_),K={class:"container mx-auto p-4"},j=r(()=>o("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),W={class:"mb-4"},X=r(()=>o("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),Y={class:"mb-4"},Z=r(()=>o("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),ee={class:"mb-4"},te=r(()=>o("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),se={class:"mb-4"},oe=r(()=>o("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),ae=["onUpdate:modelValue"],ne=["value"],le=["onUpdate:modelValue"],ie=["value"],re=["onClick"],ue={key:0,class:"text-red-500 text-sm mt-2"},de={class:"mb-4"},ce=r(()=>o("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),pe=r(()=>o("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),me={__name:"Edit",setup(_){const{props:V}=M(),u=p(V.recipe||{}),x=p(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),F=p(["1/4","1/2","1/8","1/16","1","2","3","4","5"]);function $(e){if(!e||e%1===0)return e.toString();const s=1e-6;let t=1,l=0,n=0,c=1,b=e;do{let g=Math.floor(b),h=t;t=g*t+l,l=h,h=n,n=g*n+c,c=h,b=1/(b-g)}while(Math.abs(e-t/n)>e*s);return t%n===0?`${t/n}`:`${t}/${n}`}function C(e){let s=e.split(" "),t=0,l=e;s.length>1&&(t=parseFloat(s[0]),l=s[1]);const[n,c]=l.split("/").map(Number);return c?t+n/c:parseFloat(e)}function E(e){const s=parseFloat(e);return!isNaN(s)&&s%1!==0?$(s):e}const a=p({title:u.value.title||"",description:u.value.description||"",instruction:u.value.instruction||"",image_url:null,ingredients:(u.value.ingredients||[]).map(e=>({name:e.name,quantity:e.pivot.quantity,unit:e.pivot.unit}))}),i=p(""),S=()=>{a.value.ingredients.push({name:"",quantity:F.value[0],unit:x.value[0]}),i.value=""},U=e=>{a.value.ingredients.length>1?a.value.ingredients.splice(e,1):i.value="At least one ingredient is required."},D=e=>{a.value.image_url=e.target.files[0]},N=()=>{let e=!0;return i.value="",a.value.ingredients.length<1&&(i.value="At least one ingredient is required.",e=!1),a.value.ingredients.forEach(s=>{(!s.name||!s.quantity||!s.unit)&&(i.value="All ingredient fields are required.",e=!1)}),e},P=()=>{if(!N())return;const e=new FormData;e.append("title",a.value.title),e.append("description",a.value.description),e.append("instruction",a.value.instruction),a.value.image_url&&e.append("image_url",a.value.image_url),e.append("_method","PATCH"),a.value.ingredients.forEach((s,t)=>{e.append(`ingredients[${t}][name]`,s.name),e.append(`ingredients[${t}][quantity]`,C(s.quantity)),e.append(`ingredients[${t}][unit]`,s.unit)}),y.post(`/recipes/${u.value.id}`,e)},A=()=>{confirm("Are you sure you want to delete this recipe")&&y.delete(`/recipes/${u.value.id}`,{onSuccess:()=>{y.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,s)=>(d(),R(O,null,{default:k(()=>[o("div",K,[T(H,null,{default:k(()=>[j,o("form",{onSubmit:B(P,["prevent"])},[o("div",W,[X,m(o("input",{type:"text",id:"title","onUpdate:modelValue":s[0]||(s[0]=t=>a.value.title=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,a.value.title]])]),o("div",Y,[Z,m(o("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.description=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,a.value.description]])]),o("div",ee,[te,m(o("textarea",{id:"instruction","onUpdate:modelValue":s[2]||(s[2]=t=>a.value.instruction=t),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,a.value.instruction]])]),o("div",se,[oe,(d(!0),v(q,null,w(a.value.ingredients,(t,l)=>(d(),v("div",{key:l,class:"flex items-center mb-2"},[m(o("input",{type:"text","onUpdate:modelValue":n=>t.name=n,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,ae),[[f,t.name]]),o("input",{type:"text",value:E(t.quantity),placeholder:"e.g., 1 1/2",class:"mr-4 p-2 rounded-md border-gray-300 shadow-sm"},null,8,ne),m(o("select",{"onUpdate:modelValue":n=>t.unit=n,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(d(!0),v(q,null,w(x.value,n=>(d(),v("option",{key:n,value:n},I(n),9,ie))),128))],8,le),[[z,t.unit]]),o("button",{type:"button",onClick:n=>U(l),class:"text-red-500"},"Remove",8,re)]))),128)),o("button",{type:"button",onClick:S,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),i.value?(d(),v("div",ue,I(i.value),1)):Q("",!0)]),o("div",de,[ce,o("input",{type:"file",id:"image",onChange:D,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),pe,o("button",{type:"button",onClick:A,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},ge=J(me,[["__scopeId","data-v-485caaeb"]]);export{ge as default};
