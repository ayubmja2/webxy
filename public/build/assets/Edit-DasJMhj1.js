import{Q as D,k as m,o as u,c as N,w as f,b as t,a as $,e as A,i as c,m as p,f as v,l as h,F as y,t as x,g as P,q as b,J as R,s as T,x as B}from"./app-MjWCRJ0g.js";import{_ as M,P as z}from"./Panel-CVX-B3Mt.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-Btbii9Ux.js";const r=_=>(T("data-v-e362770e"),_=_(),B(),_),L={class:"container mx-auto p-4"},O=r(()=>t("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),Q={class:"mb-4"},H=r(()=>t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),J={class:"mb-4"},K=r(()=>t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),j={class:"mb-4"},W=r(()=>t("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),X={class:"mb-4"},Y=r(()=>t("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),Z=["onUpdate:modelValue"],ee=["onUpdate:modelValue"],te=["onUpdate:modelValue"],se=["value"],oe=["onClick"],ae={key:0,class:"text-red-500 text-sm mt-2"},le={class:"mb-4"},ne=r(()=>t("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),ie=r(()=>t("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),re={__name:"Edit",setup(_){const{props:w}=D(),d=m(w.recipe||{}),g=m(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),k=m(["1/4","1/2","1/8","1/16","1","2","3","4","5"]);function q(e){const a=e.split(" ");if(a.length===2){const s=parseFloat(a[0]),i=a[1],[l,S]=i.split("/").map(Number);return s+l/S}else{const[s,i]=e.split("/").map(Number);return i?s/i:parseFloat(e)}}const o=m({title:d.value.title||"",description:d.value.description||"",instruction:d.value.instruction||"",image_url:null,ingredients:(d.value.ingredients||[]).map(e=>({name:e.name,quantity:e.pivot.quantity,unit:e.pivot.unit}))}),n=m(""),V=()=>{o.value.ingredients.push({name:"",quantity:k.value[0],unit:g.value[0]}),n.value=""},I=e=>{o.value.ingredients.length>1?o.value.ingredients.splice(e,1):n.value="At least one ingredient is required."},U=e=>{o.value.image_url=e.target.files[0]},C=()=>{let e=!0;return n.value="",o.value.ingredients.length<1&&(n.value="At least one ingredient is required.",e=!1),o.value.ingredients.forEach(a=>{(!a.name||!a.quantity||!a.unit)&&(n.value="All ingredient fields are required.",e=!1)}),e},E=()=>{if(!C())return;const e=new FormData;e.append("title",o.value.title),e.append("description",o.value.description),e.append("instruction",o.value.instruction),o.value.image_url&&e.append("image_url",o.value.image_url),e.append("_method","PATCH"),o.value.ingredients.forEach((a,s)=>{e.append(`ingredients[${s}][name]`,a.name),e.append(`ingredients[${s}][quantity]`,q(a.quantity)),e.append(`ingredients[${s}][unit]`,a.unit)}),b.post(`/recipes/${d.value.id}`,e)},F=()=>{confirm("Are you sure you want to delete this recipe")&&b.delete(`/recipes/${d.value.id}`,{onSuccess:()=>{b.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,a)=>(u(),N(M,null,{default:f(()=>[t("div",L,[$(z,null,{default:f(()=>[O,t("form",{onSubmit:A(E,["prevent"])},[t("div",Q,[H,c(t("input",{type:"text",id:"title","onUpdate:modelValue":a[0]||(a[0]=s=>o.value.title=s),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[p,o.value.title]])]),t("div",J,[K,c(t("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=s=>o.value.description=s),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[p,o.value.description]])]),t("div",j,[W,c(t("textarea",{id:"instruction","onUpdate:modelValue":a[2]||(a[2]=s=>o.value.instruction=s),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[p,o.value.instruction]])]),t("div",X,[Y,(u(!0),v(y,null,h(o.value.ingredients,(s,i)=>(u(),v("div",{key:i,class:"flex items-center mb-2"},[c(t("input",{type:"text","onUpdate:modelValue":l=>s.name=l,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,Z),[[p,s.name]]),c(t("input",{type:"text","onUpdate:modelValue":l=>s.quantity=l,placeholder:"e.g., 1 1/2",class:"mr-4 p-2 rounded-md border-gray-300 shadow-sm"},null,8,ee),[[p,s.quantity]]),c(t("select",{"onUpdate:modelValue":l=>s.unit=l,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(u(!0),v(y,null,h(g.value,l=>(u(),v("option",{key:l,value:l},x(l),9,se))),128))],8,te),[[R,s.unit]]),t("button",{type:"button",onClick:l=>I(i),class:"text-red-500"},"Remove",8,oe)]))),128)),t("button",{type:"button",onClick:V,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),n.value?(u(),v("div",ae,x(n.value),1)):P("",!0)]),t("div",le,[ne,t("input",{type:"file",id:"image",onChange:U,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),ie,t("button",{type:"button",onClick:F,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},pe=G(re,[["__scopeId","data-v-e362770e"]]);export{pe as default};
