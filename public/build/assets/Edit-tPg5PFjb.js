import{Q as $,k as m,o as n,c as A,w as k,b as t,a as D,e as F,i as c,m as v,f as r,l as _,F as b,t as g,g as R,q as f,J as w,s as P,x as B}from"./app-CrjKwwG5.js";import{_ as M,P as N}from"./Panel-Bkwnt1yR.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BpJIYqTZ.js";const d=p=>(P("data-v-00cbb657"),p=p(),B(),p),z={class:"container mx-auto p-4"},G=d(()=>t("h1",{class:"text-2xl font-bold mb-4"},"Edit your recipe",-1)),L={class:"mb-4"},O=d(()=>t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Recipe Name",-1)),Q={class:"mb-4"},H=d(()=>t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Recipe Description",-1)),J={class:"mb-4"},K=d(()=>t("label",{for:"instruction",class:"block text-sm font-medium text-gray-700"},"Recipe Instruction",-1)),j={class:"mb-4"},W=d(()=>t("label",{class:"block text-sm font-medium text-gray-700"},"Ingredients",-1)),X=["onUpdate:modelValue"],Y=["onUpdate:modelValue"],Z=["value"],ee=["onUpdate:modelValue"],te=["value"],se=["onClick"],oe={key:0,class:"text-red-500 text-sm mt-2"},le={class:"mb-4"},ae=d(()=>t("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),ne=d(()=>t("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Submit",-1)),ie={__name:"Edit",setup(p){const{props:q}=$(),u=m(q.recipe||{}),h=m(["Gram (g)","Kilogram (kg)","Ounce (oz)","Pound (lb)","Teaspoon (tsp)","Tablespoon (tbsp)","Cup (c)","Fluid Ounce (fl oz)","Pint (pt)","Quart (qt)","Gallon (gal)","Milliliter (ml)","Liter (l)"]),y=m(["1/4","1/2","1/8","1/16","1","2","3","4","5"]),s=m({title:u.value.title||"",description:u.value.description||"",instruction:u.value.instruction||"",image_url:null,ingredients:(u.value.ingredients||[]).map(e=>({name:e.name,quantity:e.pivot.quantity,unit:e.pivot.unit}))}),i=m(""),V=()=>{s.value.ingredients.push({name:"",quantity:y.value[0],unit:h.value[0]}),i.value=""},I=e=>{s.value.ingredients.length>1?s.value.ingredients.splice(e,1):i.value="At least one ingredient is required."},U=e=>{s.value.image_url=e.target.files[0]},C=()=>{let e=!0;return i.value="",s.value.ingredients.length<1&&(i.value="At least one ingredient is required.",e=!1),s.value.ingredients.forEach(l=>{(!l.name||!l.quantity||!l.unit)&&(i.value="All ingredient fields are required.",e=!1)}),e},E=()=>{if(!C())return;const e=new FormData;e.append("title",s.value.title),e.append("description",s.value.description),e.append("instruction",s.value.instruction),s.value.image_url&&e.append("image_url",s.value.image_url),e.append("_method","PATCH"),s.value.ingredients.forEach((l,o)=>{e.append(`ingredients[${o}][name]`,l.name),e.append(`ingredients[${o}][quantity]`,l.quantity),e.append(`ingredients[${o}][unit]`,l.unit)}),f.post(`/recipes/${u.value.id}`,e)},S=()=>{confirm("Are you sure you want to delete this recipe")&&f.delete(`/recipes/${u.value.id}`,{onSuccess:()=>{f.visit("/recipes")},onError:e=>{console.log("Recipe deletion failed",e)}})};return(e,l)=>(n(),A(M,null,{default:k(()=>[t("div",z,[D(N,null,{default:k(()=>[G,t("form",{onSubmit:F(E,["prevent"])},[t("div",L,[O,c(t("input",{type:"text",id:"title","onUpdate:modelValue":l[0]||(l[0]=o=>s.value.title=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[v,s.value.title]])]),t("div",Q,[H,c(t("textarea",{id:"description","onUpdate:modelValue":l[1]||(l[1]=o=>s.value.description=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[v,s.value.description]])]),t("div",J,[K,c(t("textarea",{id:"instruction","onUpdate:modelValue":l[2]||(l[2]=o=>s.value.instruction=o),class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[v,s.value.instruction]])]),t("div",j,[W,(n(!0),r(b,null,_(s.value.ingredients,(o,x)=>(n(),r("div",{key:x,class:"flex items-center mb-2"},[c(t("input",{type:"text","onUpdate:modelValue":a=>o.name=a,placeholder:"Ingredient",class:"mr-2 p-2 flex-1 rounded-md border-gray-300 shadow-sm"},null,8,X),[[v,o.name]]),c(t("select",{"onUpdate:modelValue":a=>o.quantity=a,class:"mr-4 ml-4 p-2 pr-4 pl-6 rounded-md border-gray-300 shadow-sm quantity-select"},[(n(!0),r(b,null,_(y.value,a=>(n(),r("option",{key:a,value:a},g(a),9,Z))),128))],8,Y),[[w,o.quantity]]),c(t("select",{"onUpdate:modelValue":a=>o.unit=a,class:"mr-2 p-2 rounded-md border-gray-300 shadow-sm unit-select"},[(n(!0),r(b,null,_(h.value,a=>(n(),r("option",{key:a,value:a},g(a),9,te))),128))],8,ee),[[w,o.unit]]),t("button",{type:"button",onClick:a=>I(x),class:"text-red-500"},"Remove",8,se)]))),128)),t("button",{type:"button",onClick:V,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Add Ingredient "),i.value?(n(),r("div",oe,g(i.value),1)):R("",!0)]),t("div",le,[ae,t("input",{type:"file",id:"image",onChange:U,class:"mt-1 p-2 block w-full rounded-md border-gray-300 shadow-sm"},null,32)]),ne,t("button",{type:"button",onClick:S,class:"bg-blue-500 text-white py-2 px-4 rounded-lg"},"Delete")],32)]),_:1})])]),_:1}))}},me=T(ie,[["__scopeId","data-v-00cbb657"]]);export{me as default};
