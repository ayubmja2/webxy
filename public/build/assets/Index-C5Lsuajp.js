import{Q as T,k as _,y as N,o as r,c as R,w as c,b as o,a as l,e as $,i as E,m as M,f as n,l as k,F as h,u as V,j as A,d as F,t as L,s as j,x as q,q as g}from"./app-DOJmsywx.js";import{_ as z,P as m}from"./Panel-BAiMVikm.js";import{_ as b}from"./RecipeCard-Dbkqg8sB.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DjPChDG9.js";const f=d=>(j("data-v-e278bbd1"),d=d(),q(),d),Y={class:"container mx-auto m-4 px-4 mt-20"},Q={class:"flex flex-col"},U={class:"text-center"},G=f(()=>o("button",{class:"bg-orange-400 max-sm:mt-2 md:ml-4 rounded-2xl p-2 px-4 shadow dark:shadow-amber-500",type:"submit"},"New Category",-1)),H={class:"grid grid-cols-2 m-4 gap-2"},J={class:"flex flex-col space-y-2 text-center"},K=f(()=>o("div",null,[o("h1",null,"New Categories")],-1)),O={class:"flex flex-wrap justify-evenly max-sm:flex-col text-center"},W=["onDrop"],X={class:"container mx-auto"},Z=f(()=>o("div",{class:"text-center mb-4"},[o("h1",null,"New BookMarks")],-1)),ee={class:"container mx-auto"},oe={class:"h-80 overflow-y-scroll hide-scrollbar"},se={class:"flex flex-col space-y-2"},te=["onDragstart"],ae={class:"container mx-auto col-span-2"},re=f(()=>o("div",{class:"text-center text-md mb-3"},[o("h1",null,"My Recipes")],-1)),le={class:"container mx-auto"},ce={class:"h-40 overflow-x-auto hide-scrollbar"},ne={class:"flex space-x-4"},ie={__name:"Index",setup(d){const{props:u}=T(),v=_(u.categories),y=_(u.recipes),a=_(Array.isArray(u.bookmarkedRecipes)?u.bookmarkedRecipes:[]),p=_(""),w=async()=>{try{const t=(await axios.post("/cookbook",{title:p.value})).data.category;v.value.push(t),p.value=""}catch(s){console.error("Error creating category:",s)}},B=(s,t)=>{s.dataTransfer.setData("bookmarkId",t)},D=async(s,t)=>{s.preventDefault();const e=s.dataTransfer.getData("bookmarkId");await g.post(`/categories/${t}/bookmarks`,{bookmarkId:e},{onSuccess:()=>{const i=a.value.filter(S=>S.id!==parseInt(e));a.value=i}})},I=s=>{s.preventDefault()},x=s=>{g.get(`/recipes/${s}`)},C=async s=>{try{const t=await axios.post(`/recipes/${s.id}/bookmark`);s.is_bookmarked=t.data.is_bookmarked,s.is_bookmarked?a.value.some(e=>e.id===s.id)||a.value.push(s):a.value=a.value.filter(e=>e.id!==s.id)}catch(t){console.log("Error bookmarking recipe:",t)}};return N(()=>{document.querySelectorAll(".overflow-x-auto").forEach(t=>{t.addEventListener("wheel",function(e){e.deltaY!==0&&(e.preventDefault(),t.scrollLeft+=e.deltaY)})})}),(s,t)=>(r(),R(z,null,{default:c(()=>[o("div",Y,[l(m,null,{default:c(()=>[o("div",Q,[o("div",U,[o("form",{onSubmit:$(w,["prevent"])},[E(o("input",{type:"text",class:"rounded-2xl opacity-50 mr-4","onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),placeholder:"New Category"},null,512),[[M,p.value]]),G],32)])])]),_:1}),o("div",H,[l(m,null,{default:c(()=>[o("div",J,[K,o("ul",O,[(r(!0),n(h,null,k(v.value,e=>(r(),n("li",{class:"p-2 bg-orange-400 rounded-lg shadow",key:e.id,onDragover:I,onDrop:i=>D(i,e.id)},[l(V(A),{href:`/categories/${e.id}`},{default:c(()=>[F(L(e.title),1)]),_:2},1032,["href"])],40,W))),128))])])]),_:1}),l(m,null,{default:c(()=>[o("div",X,[Z,o("div",ee,[o("div",oe,[o("ul",se,[(r(!0),n(h,null,k(a.value,e=>(r(),n("li",{key:e.id,draggable:"true",onDragstart:i=>B(i,e.id),class:"p-2 rounded-lg"},[l(b,{recipe:e,isBookmarked:e.is_bookmarked,navigateToRecipe:x,toggleBookmark:C},null,8,["recipe","isBookmarked"])],40,te))),128))])])])])]),_:1}),o("div",ae,[l(m,null,{default:c(()=>[re,o("div",le,[o("div",ce,[o("ul",ne,[(r(!0),n(h,null,k(y.value,e=>(r(),n("li",{class:"flex-shrink-0",key:e.id},[l(b,{class:"my-recipe",recipe:e,navigateToRecipe:x,showBookmark:!1,compact:!0},null,8,["recipe"])]))),128))])])])]),_:1})])])])]),_:1}))}},fe=P(ie,[["__scopeId","data-v-e278bbd1"]]);export{fe as default};
