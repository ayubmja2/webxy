import{Q as I,l as m,x as T,f as N,w as n,o as r,a as t,d as l,g as R,k as S,p as $,c as i,m as f,F as k,u as E,i as M,e as F,t as V,s as g}from"./app-lU8TWT0b.js";import{_ as A,P as p}from"./Panel-BiDUElB3.js";import{_ as h}from"./RecipeCard-DsPsRBik.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CCfLUJ2G.js";const z={class:"container mx-auto m-4 px-4 mt-20"},G={class:"flex flex-col"},O={class:"text-center"},P={class:"grid grid-cols-2 m-4 gap-2"},Y={class:"flex flex-col space-y-2 text-center"},j={class:"flex flex-wrap justify-evenly max-sm:flex-col text-center"},q=["onDrop"],Q={class:"container mx-auto"},U={class:"container mx-auto"},H={class:"h-80 overflow-y-scroll hide-scrollbar"},J={class:"flex flex-col space-y-2"},K=["onDragstart"],W={class:"container mx-auto col-span-2"},X={class:"container mx-auto"},Z={class:"h-40 overflow-x-auto hide-scrollbar"},ee={class:"flex space-x-4"},oe={__name:"Index",setup(te){const{props:d}=I(),_=m(d.categories),y=m(d.recipes),a=m(Array.isArray(d.bookmarkedRecipes)?d.bookmarkedRecipes:[]),u=m(""),b=async()=>{try{const o=(await axios.post("/cookbook",{title:u.value})).data.category;_.value.push(o),u.value=""}catch(s){console.error("Error creating category:",s)}},w=(s,o)=>{s.dataTransfer.setData("bookmarkId",o)},B=async(s,o)=>{s.preventDefault();const e=s.dataTransfer.getData("bookmarkId");await g.post(`/categories/${o}/bookmarks`,{bookmarkId:e},{onSuccess:()=>{const c=a.value.filter(C=>C.id!==parseInt(e));a.value=c}})},D=s=>{s.preventDefault()},x=s=>{g.get(`/recipes/${s}`)},v=async s=>{try{const o=await axios.post(`/recipes/${s.id}/bookmark`);s.is_bookmarked=o.data.is_bookmarked,s.is_bookmarked?a.value.some(e=>e.id===s.id)||a.value.push(s):a.value=a.value.filter(e=>e.id!==s.id)}catch(o){console.log("Error bookmarking recipe:",o)}};return T(()=>{document.querySelectorAll(".overflow-x-auto").forEach(o=>{o.addEventListener("wheel",function(e){e.deltaY!==0&&(e.preventDefault(),o.scrollLeft+=e.deltaY)})})}),(s,o)=>(r(),N(A,null,{default:n(()=>[t("div",z,[l(p,null,{default:n(()=>[t("div",G,[t("div",O,[t("form",{onSubmit:R(b,["prevent"])},[S(t("input",{type:"text",class:"rounded-2xl opacity-50 mr-4","onUpdate:modelValue":o[0]||(o[0]=e=>u.value=e),placeholder:"New Category"},null,512),[[$,u.value]]),o[1]||(o[1]=t("button",{class:"bg-darkOrange text-mintGreen max-sm:mt-2 md:ml-4 rounded-2xl p-2 px-4 shadow dark:shadow-amber-500",type:"submit"},"New Category",-1))],32)])])]),_:1}),t("div",P,[l(p,null,{default:n(()=>[t("div",Y,[o[2]||(o[2]=t("div",{class:"font-medium mb-4"},[t("h1",null,"New Categories")],-1)),t("ul",j,[(r(!0),i(k,null,f(_.value,e=>(r(),i("li",{class:"p-2 bg-darkOrange text-mintGreen rounded-lg shadow",key:e.id,onDragover:D,onDrop:c=>B(c,e.id)},[l(E(M),{href:`/categories/${e.id}`},{default:n(()=>[F(V(e.title),1)]),_:2},1032,["href"])],40,q))),128))])])]),_:1}),l(p,null,{default:n(()=>[t("div",Q,[o[3]||(o[3]=t("div",{class:"text-center mb-4 font-medium"},[t("h1",null,"New BookMarks")],-1)),t("div",U,[t("div",H,[t("ul",J,[(r(!0),i(k,null,f(a.value,e=>(r(),i("li",{key:e.id,draggable:"true",onDragstart:c=>w(c,e.id),class:"p-2 rounded-lg"},[l(h,{recipe:e,isBookmarked:e.is_bookmarked,navigateToRecipe:x,toggleBookmark:v,iconCompact:!0,showSocialIcons:!1},null,8,["recipe","isBookmarked"])],40,K))),128))])])])])]),_:1}),t("div",W,[l(p,null,{default:n(()=>[o[4]||(o[4]=t("div",{class:"text-center text-md mb-4 font-medium"},[t("h1",null,"My Recipes")],-1)),t("div",X,[t("div",Z,[t("ul",ee,[(r(!0),i(k,null,f(y.value,e=>(r(),i("li",{class:"flex-shrink-0",key:e.id},[l(h,{class:"my-recipe",recipe:e,navigateToRecipe:x,toggleBookmark:v,compact:!0,showFooter:!1},null,8,["recipe"])]))),128))])])])]),_:1})])])])]),_:1}))}},ie=L(oe,[["__scopeId","data-v-e2b99cea"]]);export{ie as default};
