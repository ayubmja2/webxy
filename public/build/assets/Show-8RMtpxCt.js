import{Q as V,k as j,y as $,p as q,K as Q,o as f,c as F,w as L,b as u,a as O,t as w,u as v,f as m,i as R,C as T,j as U,d as Z,g as E,l as B,F as I}from"./app-D3smY0wd.js";import{_ as K}from"./AuthenticatedLayout-kgJndhos.js";import{P as A}from"./Panel-CHeHEeyC.js";import"./ApplicationLogo-GAHcZ-Dm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var X=2e3,r={s:1,n:0,d:1};function x(t,s){if(isNaN(t=parseInt(t,10)))throw S();return t*s}function c(t,s){if(s===0)throw D();var e=Object.create(y.prototype);e.s=t<0?-1:1,t=t<0?-t:t;var i=M(t,s);return e.n=t/i,e.d=s/i,e}function P(t){for(var s={},e=t,i=2,a=4;a<=e;){for(;e%i===0;)e/=i,s[i]=(s[i]||0)+1;a+=1+2*i++}return e!==t?e>1&&(s[e]=(s[e]||0)+1):s[t]=(s[t]||0)+1,s}var g=function(t,s){var e=0,i=1,a=1,h=0,d=0,k=0,b=1,N=1,o=0,n=1,_=1,l=1,p=1e7,C;if(t!=null)if(s!==void 0){if(e=t,i=s,a=e*i,e%1!==0||i%1!==0)throw J()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)e=t.n,i=t.d,"s"in t&&(e*=t.s);else if(0 in t)e=t[0],1 in t&&(i=t[1]);else throw S();a=e*i;break}case"number":{if(t<0&&(a=t,t=-t),t%1===0)e=t;else if(t>0){for(t>=1&&(N=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=N);n<=p&&l<=p;)if(C=(o+_)/(n+l),t===C){n+l<=p?(e=o+_,i=n+l):l>n?(e=_,i=l):(e=o,i=n);break}else t>C?(o+=_,n+=l):(_+=o,l+=n),n>p?(e=_,i=l):(e=o,i=n);e*=N}else(isNaN(t)||isNaN(s))&&(i=e=NaN);break}case"string":{if(n=t.match(/\d+|./g),n===null)throw S();if(n[o]==="-"?(a=-1,o++):n[o]==="+"&&o++,n.length===o+1?d=x(n[o++],a):n[o+1]==="."||n[o]==="."?(n[o]!=="."&&(h=x(n[o++],a)),o++,(o+1===n.length||n[o+1]==="("&&n[o+3]===")"||n[o+1]==="'"&&n[o+3]==="'")&&(d=x(n[o],a),b=Math.pow(10,n[o].length),o++),(n[o]==="("&&n[o+2]===")"||n[o]==="'"&&n[o+2]==="'")&&(k=x(n[o+1],a),N=Math.pow(10,n[o+1].length)-1,o+=3)):n[o+1]==="/"||n[o+1]===":"?(d=x(n[o],a),b=x(n[o+2],1),o+=3):n[o+3]==="/"&&n[o+1]===" "&&(h=x(n[o],a),d=x(n[o+2],a),b=x(n[o+4],1),o+=5),n.length<=o){i=b*N,a=e=k+i*h+N*d;break}}default:throw S()}if(i===0)throw D();r.s=a<0?-1:1,r.n=Math.abs(e),r.d=Math.abs(i)};function Y(t,s,e){for(var i=1;s>0;t=t*t%e,s>>=1)s&1&&(i=i*t%e);return i}function G(t,s){for(;s%2===0;s/=2);for(;s%5===0;s/=5);if(s===1)return 0;for(var e=10%s,i=1;e!==1;i++)if(e=e*10%s,i>X)return 0;return i}function H(t,s,e){for(var i=1,a=Y(10,e,s),h=0;h<300;h++){if(i===a)return h;i=i*10%s,a=a*10%s}return 0}function M(t,s){if(!t)return s;if(!s)return t;for(;;){if(t%=s,!t)return s;if(s%=t,!s)return t}}function y(t,s){if(g(t,s),this instanceof y)t=M(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t;else return c(r.s*r.n,r.d)}var D=function(){return new Error("Division by Zero")},S=function(){return new Error("Invalid argument")},J=function(){return new Error("Parameters must be integer")};y.prototype={s:1,n:0,d:1,abs:function(){return c(this.n,this.d)},neg:function(){return c(-this.s*this.n,this.d)},add:function(t,s){return g(t,s),c(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,s){return g(t,s),c(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,s){return g(t,s),c(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,s){return g(t,s),c(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return c(this.s*this.n,this.d)},mod:function(t,s){if(isNaN(this.n)||isNaN(this.d))return new y(NaN);if(t===void 0)return c(this.s*this.n%this.d,1);if(g(t,s),r.n===0&&this.d===0)throw D();return c(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(t,s){return g(t,s),c(M(r.n,this.n)*M(r.d,this.d),r.d*this.d)},lcm:function(t,s){return g(t,s),r.n===0&&this.n===0?c(0,1):c(r.n*this.n,M(r.n,this.n)*M(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):c(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):c(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):c(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,s){return g(t,s),c(this.s*Math.round(this.n*r.d/(this.d*r.n))*r.n,r.d)},inverse:function(){return c(this.s*this.d,this.n)},pow:function(t,s){if(g(t,s),r.d===1)return r.s<0?c(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):c(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var e=P(this.n),i=P(this.d),a=1,h=1;for(var d in e)if(d!=="1"){if(d==="0"){a=0;break}if(e[d]*=r.n,e[d]%r.d===0)e[d]/=r.d;else return null;a*=Math.pow(d,e[d])}for(var d in i)if(d!=="1"){if(i[d]*=r.n,i[d]%r.d===0)i[d]/=r.d;else return null;h*=Math.pow(d,i[d])}return r.s<0?c(h,a):c(a,h)},equals:function(t,s){return g(t,s),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(t,s){g(t,s);var e=this.s*this.n*r.d-r.s*r.n*this.d;return(0<e)-(e<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var s=this.abs(),e=s.toContinued(),i=1;i<e.length;i++){for(var a=c(e[i-1],1),h=i-2;h>=0;h--)a=a.inverse().add(e[h]);if(Math.abs(a.sub(s).valueOf())<t)return a.mul(this.s)}return this},divisible:function(t,s){return g(t,s),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var s,e="",i=this.n,a=this.d;return this.s<0&&(e+="-"),a===1?e+=i:(t&&(s=Math.floor(i/a))>0&&(e+=s,e+=" ",i%=a),e+=i,e+="/",e+=a),e},toLatex:function(t){var s,e="",i=this.n,a=this.d;return this.s<0&&(e+="-"),a===1?e+=i:(t&&(s=Math.floor(i/a))>0&&(e+=s,i%=a),e+="\\frac{",e+=i,e+="}{",e+=a,e+="}"),e},toContinued:function(){var t,s=this.n,e=this.d,i=[];if(isNaN(s)||isNaN(e))return i;do i.push(Math.floor(s/e)),t=s%e,s=e,e=t;while(s!==1);return i},toString:function(t){var s=this.n,e=this.d;if(isNaN(s)||isNaN(e))return"NaN";t=t||15;var i=G(s,e),a=H(s,e,i),h=this.s<0?"-":"";if(h+=s/e|0,s%=e,s*=10,s&&(h+="."),i){for(var d=a;d--;)h+=s/e|0,s%=e,s*=10;h+="(";for(var d=i;d--;)h+=s/e|0,s%=e,s*=10;h+=")"}else for(var d=t;s&&d--;)h+=s/e|0,s%=e,s*=10;return h}};const W={class:"mx-6"},tt={class:"font-bold mb-6 flex justify-between mx-4"},st={key:0,class:"relative"},et={id:"dropdown-menu",class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20"},it={class:"grid grid-cols-2 font-medium"},nt={class:"flex flex-row justify-center"},rt=["src"],ot={class:"grid grid-rows-1 border-2 border-darkOrange p-4 rounded-lg shadow-md transform transition-transform"},at={class:"flex flex-col"},dt={class:"grid grid-rows-2 justify-items-center mx-20"},lt=u("div",{class:"my-auto font-bold text-xl underline"},[u("h1",null,"Instructions")],-1),ut={class:"container text-center tracking-wide leading-loose"},ht={class:"grid grid-cols-2 flex-shrink mx-12"},ct={class:"flex flex-col flex-shrink"},ft=u("div",{class:"mx-auto font-bold max-md:text-sm underline mb-4"},[u("h1",null,"Allergies")],-1),vt={class:"flex"},mt={class:"flex flex-wrap gap-2"},_t={key:0},gt={class:"grid grid-cols-2 max-md:text-sm max-md:font-thin"},wt={class:"grid grid-rows-1 justify-items-center"},Nt=u("div",{class:"md:font-bold max-md:text-sm underline"},[u("h1",null,"Ingredients")],-1),xt={class:"text-center mt-2 space-y-2"},pt={key:0},yt={key:1},bt={class:"container flex-none"},Mt={class:"grid grid-rows-1 text-center flex-none"},kt={class:"grid grid-rows-1 grid-flow-col gap-2 text-md space-x-1 flex-none"},Ct={key:0},Et={class:"md:font-bold max-md:text-sm underline"},Lt={class:"mt-3 space-y-2"},Ft={__name:"Show",setup(t){const{props:s}=V(),e=s.recipe,i=j({}),a=j(!1),h=n=>{const _=document.getElementById("dropdown-menu"),l=document.getElementById("ellipsis-icon");_&&l&&!_.contains(n.target)&&!l.contains(n.target)&&(a.value=!1)},d=n=>n.toLowerCase().trim().replace(/s$/,""),k=(s.auth.user.allergens||[]).map(n=>d(n)),b=e.ingredients.map(n=>d(n.name)),N=b.filter(n=>k.includes(n));$(()=>{document.addEventListener("click",h),q.post("http://localhost:5001/suggest_substitutes",{ingredients:b,allergens:k}).then(n=>{console.log("Received sub:",n.data.substitutes),i.value=n.data.substitutes}).catch(n=>{console.error("Error fetching substitutions:",n)})}),Q(()=>{document.removeEventListener("click",h)});const o=n=>{try{return new y(n).toFraction(!0)}catch{return n}};return(n,_)=>(f(),F(K,null,{default:L(()=>[u("div",W,[O(A,{class:"flex flex-col mt-20 p-6 rounded-lg shadow-xl transform transition-transform"},{default:L(()=>[u("div",tt,[u("h1",null,w(v(e).title),1),v(e).user_id===v(s).auth.user.id?(f(),m("div",st,[u("i",{class:"fa-solid fa-ellipsis cursor-pointer",id:"ellipsis-icon",onClick:_[0]||(_[0]=l=>a.value=!a.value)}),R(u("div",et,[v(e).user_id===v(s).auth.user.id?(f(),F(v(U),{key:0,href:`/recipes/${v(e).id}/edit`,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:L(()=>[Z("Edit Recipe")]),_:1},8,["href"])):E("",!0)],512),[[T,a.value]])])):E("",!0)]),u("div",it,[u("div",null,[u("div",nt,[v(e).image_url?(f(),m("img",{key:0,src:v(e).image_url,class:"rounded-lg shadow-2xl dark:shadow-darkOrange w-1/2",alt:"recipe image"},null,8,rt)):E("",!0)])]),u("div",ot,[u("div",at,[u("div",dt,[lt,u("div",ut,w(v(e).instruction),1)])])])])]),_:1}),O(A,{class:"flex flex-col mt-8 p-6 rounded-lg shadow-xl transform transition-transform"},{default:L(()=>[u("div",ht,[u("div",ct,[ft,u("div",vt,[u("div",mt,[(f(!0),m(I,null,B(v(N),l=>(f(),m("span",{key:l,class:"bg-red-500 text-white rounded-2xl px-4 py-2"},w(l.charAt(0).toUpperCase()+l.slice(1)),1))),128)),v(N).length===0?(f(),m("span",_t,"No allergens found.")):E("",!0)])])]),u("div",gt,[u("div",wt,[Nt,u("ul",xt,[(f(!0),m(I,null,B(v(e).ingredients,(l,p)=>(f(),m("li",{key:p},[["Large","Medium","Small"].includes(l.pivot.unit)?(f(),m("span",pt,w(o(l.pivot.quantity))+" "+w(o(l.pivot.unit))+" "+w(o(l.name)),1)):(f(),m("span",yt,w(o(l.pivot.quantity))+" "+w(o(l.pivot.unit))+" "+w(o(l.name)),1))]))),128))])]),u("div",bt,[u("div",Mt,[u("ul",kt,[(f(!0),m(I,null,B(v(e).ingredients,(l,p)=>(f(),m("li",{class:"mb-2",key:p},[i.value[d(l.name)]&&i.value[d(l.name)].length>0?(f(),m("span",Ct,[u("span",Et,"Substitutes for: "+w(l.name),1)])):E("",!0),u("ul",Lt,[(f(!0),m(I,null,B(i.value[d(l.name)],(C,z)=>(f(),m("li",{key:z},w(C),1))),128))])]))),128))])])])])])]),_:1})])]),_:1}))}};export{Ft as default};
