import{o as l,c as r,F as x,m as b,a as e,t as _,n as Y,q as S,Q as ce,l as c,f as C,w as d,u,h as g,e as de,d as a,i as P,k as ue,p as fe,A as me,s as z}from"./app-lU8TWT0b.js";import{_ as ge,P as p}from"./Panel-BiDUElB3.js";import ve from"./DeleteUserForm-9zcPU8Mk.js";import pe from"./UpdatePasswordForm-CCVNkOQC.js";import we from"./UpdateProfileInformationForm-BgjkvPuN.js";import{_ as he}from"./RecipeCard-DsPsRBik.js";import{_ as T,d as _e}from"./Debounce-BWEZsiFx.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CCfLUJ2G.js";import"./TextInput-E9kHvqHZ.js";import"./PrimaryButton-d0zPF-f0.js";const be={class:"flex justify-evenly items-center"},ye=["onClick"],ke={__name:"SectionNavigation",props:{currentSection:String,options:Array},emits:["switch-section"],setup(i,{emit:o}){const h=o,w=m=>{h("switch-section",m)};return(m,v)=>(l(),r("ul",be,[(l(!0),r(x,null,b(i.options,f=>(l(),r("li",{key:f.value},[e("button",{onClick:()=>w(f.value),class:Y([{"text-mintGreen":i.currentSection===f.value},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform"])},_(f.label),11,ye)]))),128))]))}},Ce={class:"flex justify-evenly mb-10"},Se=["onClick"],Fe={__name:"FollowerNavigation",props:{currentFollowerSection:String,options:Array},emits:["switch-follower-section"],setup(i,{emit:o}){const h=o,w=m=>{h("switch-follower-section",m)};return(m,v)=>(l(),r("ul",Ce,[(l(!0),r(x,null,b(i.options,f=>(l(),r("li",{key:f.value},[e("button",{onClick:()=>w(f.value),class:Y([{"text-mintGreen":i.currentFollowerSection===f.value},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform"])},_(f.label),11,Se)]))),128))]))}},L=(i,o,h)=>{const w=i.target.files[0];if(w){const m=new FileReader;m.onload=v=>{o.value=v.target.result},m.readAsDataURL(w)}h.value=w},O=async(i,o={})=>{try{return await S.post(i,o)}catch(h){throw alert("An error occurred GG while making the request."),h}},$e={class:"fixed z-10 inset-0 overflow-y-auto"},Be={class:"flex items-center justify-center min-h-screen"},Ae={class:"bg-white p-6 rounded-center min-h-screen"},Pe=["value"],Oe={__name:"BioModal",props:{bio:String,saveBio:Function,closeModal:Function},emits:["update:bio"],setup(i,{emit:o}){const h=o,w=m=>{h("update:bio",m.target.value)};return(m,v)=>(l(),r("div",$e,[e("div",Be,[e("div",Ae,[v[2]||(v[2]=e("h2",{class:"text-xl mb-4"},"Edit Bio",-1)),e("textarea",{value:i.bio,onInput:w,class:"w-full p-2 border rounded mb-4",rows:"4"},null,40,Pe),e("button",{onClick:v[0]||(v[0]=(...f)=>i.saveBio&&i.saveBio(...f)),class:"bg-green-500 text-mintGreen p-2 rounded"},"Save"),e("button",{onClick:v[1]||(v[1]=(...f)=>i.closeModal&&i.closeModal(...f)),class:"bg-red-500 text-mintGreen p-2 rounded"},"Cancel")])])]))}},Ge={class:"relative"},Ie=["src"],Ue={class:"absolute bottom-0 left-0 right-0 flex items-center justify-center mt-4"},je={class:"relative"},Ee=["src"],Te={class:"text-2xl font-medium text-black text-center mt-2 mb-2 p-2"},Me={key:0,class:"absolute top-0 right-0 m-4"},Ne={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg z-20"},De={class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer"},Ve={class:"px-10"},Re={class:"mx-auto mt-4"},ze={class:"container mx-auto"},Le={key:0,class:"mt-4"},Ye={class:"grid grid-cols-3 justify-items-center"},qe={class:"justify-self-end"},Ke={key:2},Qe={class:"mt-8"},Xe={class:"grid grid-cols-2 gap-4"},He={class:"grid grid-rows-2 gap-4 p-4 size-full"},Je={class:"text-center font-medium"},We={class:"flex md:flex-wrap max-md:flex-col justify-center md:space-x-4 text-4xl mt-4 max-md:text-lg"},Ze={class:"font-medium text-center"},et={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},tt={class:"flex items-center justify-center min-h-screen"},ot={class:"bg-white p-6 rounded-center min-h-screen"},st=["value"],lt={class:"container mx-auto"},nt={class:"container"},rt={key:0,class:"grid grid-cols-1"},at={class:"h-96 mb-5"},it={key:1,class:"grid grid-cols-1"},ct={key:0},dt={key:1,class:"mt-4"},ut={class:"text-center font-medium text-2xl mb-6"},ft={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden overflow-y-scroll"},mt={key:2,class:"grid grid-cols-2 p-2 mt-3 gap-4"},gt={class:"mb-3"},vt={class:"flex flex-col space-y-4 p-6 mx-auto"},pt={class:"container mx-auto row-start-2 row-span-2"},wt={class:"p-7 h-28 overflow-hidden overflow-x-scroll"},ht={class:"grid grid-rows-1 grid-flow-col gap-3 justify-items-center space-x-1"},_t=["onClick"],xt={class:"container row-span-2"},bt={class:"grid grid-cols-1 h-96 font-medium text-2xl"},yt={class:"container mt-2"},kt={class:"font-normal text-xl"},Ct={key:3,class:"mt-2"},St={class:"grid grid-cols-3 gap-4 px-8 pb-8"},Ft={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},$t={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Bt={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},At={__name:"Show",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(i){const{props:o}=ce(),h=c(o.recipes||[]),w=c(o.user.cover_image_url||"/images/placeholders/default-cover.png"),m=c(o.user.profile_image_url||"/images/placeholders/default-profile.png"),v=c(null),f=c(null),G=c(!1),y=c("public-profile"),A=c(!1),F=c(o.user.bio||""),I=c(o.followers||[]),U=c(o.followersCount||0),q=c(o.recipeCount||0),M=c(o.following||[]),$=c("following"),K=c([{value:"followers",label:"Followers"},{value:"following",label:"Following"}]),Q=c([{value:"public-profile",label:"Profile"},{value:"recipes",label:"Recipes"},{value:"account-info",label:"Account Info"},{value:"settings",label:"Settings"}]),X=()=>{A.value=!0},j=()=>{A.value=!1},N=async()=>{try{await O("/profile/update-bio",{bio:F.value}),o.user.bio=F.value,j()}catch{}},H=async()=>{try{const s=await S.get(`/profile/${o.user.id}/followers`);I.value=s.data.followers}catch{console.log("Error fetching followers:")}},J=async()=>{try{const s=await S.get(`/profile/${o.user.id}/following`);M.value=s.data.following}catch{console.log("Error fetching following:")}};H(),J();const W=()=>{G.value=!G.value},Z=s=>{L(s,w,v),D("cover_image",v.value)},ee=s=>{L(s,m,f),D("profile_image",f.value)},D=async(s,t)=>{const n=new FormData;n.append(s,t);try{await S.post("/profile/update",n,{headers:{"Content-Type":"multipart/form-data"}})}catch{alert("Failed to update profile.")}},te=async s=>{y.value=s},oe=s=>{$.value=s},B=c(""),k=c(o.user.allergens||[]),V=async()=>{if(!B.value.trim())return;const s=B.value.trim().toLowerCase();if(!k.value.includes(s))try{const t=await S.post("/profile/update-allergens",{allergens:[...k.value,s]});k.value=t.data.allergens,B.value=""}catch{alert("Failed to update allergens.")}},R=_e(V,300),se=async s=>{try{const t=await S.post("/profile/update-allergens",{allergens:k.value.filter(n=>n!==s)});k.value=t.data.allergens}catch{alert("Failed to delete allergy.")}},le=async()=>{try{(await O(`/profile/${o.user.name}/follow`)).status===200&&(o.isFollowing=!0,U.value+=1)}catch{}},ne=async()=>{try{(await O(`/profile/${o.user.name}/unfollow`)).status===200&&(o.isFollowing=!1,U.value-=1)}catch(s){console.log("Error unfollowing user:",s)}},re=async s=>{try{await O(`/recipes/${s.id}/bookmark`),s.is_bookmarked=!s.is_bookmarked}catch(t){console.log("Error bookmarking recipe:",t)}},ae=s=>{z.get(`/recipes/${s}`)},E=s=>{z.get(`/profile/${s}`)};return(s,t)=>(l(),C(ge,null,{default:d(()=>[e("div",Ge,[e("img",{src:w.value,alt:"cover art",class:"w-full h-60 object-cover"},null,8,Ie),e("div",Ue,[e("div",je,[e("img",{src:m.value,alt:"profile image",class:"w-24 h-24 rounded-full border-4 border-white object-cover cursor-pointer"},null,8,Ee),u(o).isOwnProfile?(l(),r("input",{key:0,type:"file",onChange:ee,accept:"image/*",class:"absolute top-0 left-0 opacity-0 cursor-pointer w-full h-full"},null,32)):g("",!0),e("div",Te,[e("h1",null,_(u(o).user.name),1)])])]),u(o).isOwnProfile?(l(),r("div",Me,[e("button",{onClick:W,class:"text-mintGreen hover:text-blue-600"},t[4]||(t[4]=[e("i",{class:"fa-solid fa-gear fa-2x"},null,-1)])),G.value?(l(),r("div",Ne,[e("label",De,[e("input",{type:"file",onChange:Z,accept:"image/*",class:"hidden"},null,32),t[5]||(t[5]=de(" Upload Cover Art "))])])):g("",!0)])):g("",!0)]),e("div",Ve,[e("div",Re,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",ze,[a(ke,{currentSection:y.value,options:Q.value,onSwitchSection:te},null,8,["currentSection","options"])])]),_:1})]),y.value==="public-profile"?(l(),r("div",Le,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:d(()=>[e("div",Ye,[t[6]||(t[6]=e("div",{class:"col-start-2 font-medium text-2xl mb-6"},[e("h1",null,"Profile")],-1)),e("div",qe,[u(o).isOwnProfile?(l(),r("button",{key:0,onClick:X,class:"bg-darkOrange text-mintGreen p-2 rounded"},"Edit Bio")):g("",!0),A.value?(l(),C(Oe,{key:1,bio:F.value,"onUpdate:bio":t[0]||(t[0]=n=>F.value=n),saveBio:N,closeModal:j},null,8,["bio"])):g("",!0),u(o).auth.user.id!==u(o).user.id?(l(),r("div",Ke,[u(o).isFollowing?(l(),r("button",{key:1,onClick:ne,class:"bg-red-500 text-mintGreen p-2 rounded"}," Unfollow ")):(l(),r("button",{key:0,onClick:le,class:"bg-blue-500 text-mintGreen p-2 rounded"},"Follow "))])):g("",!0)])]),e("div",Qe,[e("div",Xe,[e("div",null,[a(p,{class:"container rounded-lg shadow-xl transform transition-transform h-96"},{default:d(()=>[e("div",He,[e("div",null,[e("div",Je,[t[11]||(t[11]=e("h1",null,"Social Networks",-1)),e("div",We,[a(u(P),null,{default:d(()=>t[7]||(t[7]=[e("i",{class:"fa-brands fa-facebook text-blue-700"},null,-1)])),_:1}),a(u(P),null,{default:d(()=>t[8]||(t[8]=[e("i",{class:"fa-brands fa-instagram text-red-700"},null,-1)])),_:1}),a(u(P),null,{default:d(()=>t[9]||(t[9]=[e("i",{class:"fa-solid fa-link text-white"},null,-1)])),_:1}),a(u(P),null,{default:d(()=>t[10]||(t[10]=[e("i",{class:"fa-brands fa-youtube text-red-700"},null,-1)])),_:1})])])]),e("div",Ze,[e("p",null,_(u(o).user.bio||"No bio available"),1)])])]),_:1})]),A.value?(l(),r("div",et,[e("div",tt,[e("div",ot,[t[12]||(t[12]=e("h2",{class:"text-xl mb-4"},"Edit Bio",-1)),e("textarea",{value:F.value,onInput:t[1]||(t[1]=n=>s.$emit("update:bio",n.target.value)),class:"w-full p-2 border rounded mb-4",rows:"4"},null,40,st),e("button",{onClick:N,class:"bg-green-500 text-mintGreen p-2 rounded"},"Save "),e("button",{onClick:j,class:"bg-red-500 text-mintGreen p-2 rounded"}," Cancel ")])])])):g("",!0),e("div",null,[e("div",lt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform space-y-1 mx-auto h-96 overflow-hidden overflow-y-scroll"},{default:d(()=>[a(Fe,{currentFollowerSection:$.value,options:K.value,onSwitchFollowerSection:oe},null,8,["currentFollowerSection","options"]),e("div",nt,[$.value==="followers"?(l(),r("ul",rt,[e("li",at,[(l(!0),r(x,null,b(I.value,n=>(l(),C(T,{user:n,key:n.id,navigateToUserProfile:E},null,8,["user"]))),128))])])):g("",!0),$.value==="following"?(l(),r("ul",it,[e("li",null,[(l(!0),r(x,null,b(M.value,n=>(l(),C(T,{user:n,key:n.id,navigateToUserProfile:E},null,8,["user"]))),128))])])):g("",!0)]),e("div",null,[$.value==="followers"?(l(),r("ul",ct,[e("li",null,[(l(!0),r(x,null,b(I.value,n=>(l(),C(T,{user:n,key:n.id,navigateToUserProfile:E},null,8,["user"]))),128))])])):g("",!0)])]),_:1})])])])])]),_:1})])):g("",!0),y.value==="recipes"?(l(),r("div",dt,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:d(()=>[e("div",ut,[e("h1",null,_(u(o).user.name)+"'s Recipes",1)]),e("div",ft,[(l(!0),r(x,null,b(h.value,n=>(l(),C(he,{key:n.id,recipe:n,onToggleBookmark:re,navigateToRecipe:ae,class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},null,8,["recipe"]))),128))])]),_:1})])):g("",!0),y.value==="account-info"&&u(o).isOwnProfile?(l(),r("div",mt,[e("div",null,[e("div",gt,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 w-3/4 mx-auto"},{default:d(()=>[t[13]||(t[13]=e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Allergies")],-1)),e("div",vt,[ue(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>B.value=n),onKeyup:t[3]||(t[3]=me((...n)=>u(R)&&u(R)(...n),["enter"])),placeholder:"wheat, soy, eggs",class:"rounded-xl"},null,544),[[fe,B.value]]),e("button",{onClick:V,class:"bg-gradient-to-b from-darkOrange to-darkOrange p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-mediump-2 rounded-xl"}," Save ")])]),_:1})]),e("div",pt,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[t[14]||(t[14]=e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Your Food Allergies")],-1)),e("div",wt,[e("ul",ht,[(l(!0),r(x,null,b(k.value,n=>(l(),r("li",{key:n,class:"relative font-medium bg-darkOrange text-mintGreen rounded-xl p-3 px-7 min-w-[120px] text-center shadow-md"},[e("span",null,_(n.charAt(0).toUpperCase()+n.slice(1)),1),e("button",{onClick:ie=>se(n),class:"absolute top-1 right-1 text-red-600 font-bold"},"X ",8,_t)]))),128))])])]),_:1})])]),e("div",xt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",bt,[e("div",null,[t[15]||(t[15]=e("div",{class:"text-center"},[e("h3",null,"Account Stats")],-1)),e("div",yt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",kt,[e("p",null,"You have created "+_(q.value)+" recipes so far way to go !",1),e("p",null,"You have "+_(U.value)+" followers !",1)])]),_:1})])])])]),_:1})])])):g("",!0),y.value==="settings"&&u(o).isOwnProfile?(l(),r("div",Ct,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[t[16]||(t[16]=e("div",{class:"text-center mb-5 font-medium text-2xl"},[e("h1",null,"Account Settings")],-1)),e("div",St,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Ft,[a(we,{"must-verify-email":i.mustVerifyEmail,status:i.status},null,8,["must-verify-email","status"])])]),_:1}),a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",$t,[a(pe)])]),_:1}),a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Bt,[a(ve)])]),_:1})])]),_:1})])):g("",!0)])]),_:1}))}},Vt=xe(At,[["__scopeId","data-v-06e0595a"]]);export{Vt as default};
