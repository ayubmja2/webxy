import{Q as ne,l as u,o as l,f as O,w as d,q as v,a as e,u as n,c as r,h as c,t as _,e as ie,b as i,n as w,i as F,k as L,p as M,F as P,m as $,C as de,x as ce,y as ue,s as Y}from"./app-DW5hMwWO.js";import{_ as fe,P as f}from"./Panel-CLCObIL3.js";import me from"./DeleteUserForm-C0_Wu-uE.js";import ge from"./UpdatePasswordForm-Cv1ldpmA.js";import ve from"./UpdateProfileInformationForm-BzOjbwGk.js";import{_ as pe}from"./RecipeCard-DHjGdGqS.js";import{_ as K}from"./UserCard-B7Rk9ldU.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CNx1zmji.js";import"./TextInput-xIyIel8p.js";import"./PrimaryButton-C2Pa77aI.js";const m=p=>(ce("data-v-d5cb5a95"),p=p(),ue(),p),_e={class:"relative"},we=["src"],xe={class:"absolute bottom-0 left-0 right-0 flex items-center justify-center mt-4"},be={class:"relative"},ye=["src"],ke={class:"text-2xl font-medium text-black text-center mt-2 mb-2 p-2"},Ce={key:0,class:"absolute top-0 right-0 m-4"},Oe=m(()=>e("i",{class:"fa-solid fa-gear fa-2x"},null,-1)),Fe=[Oe],Pe={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg z-20"},$e={class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer"},Se={class:"px-10"},Ae={class:"mx-auto mt-4"},Be={class:"container mx-auto"},Ge={class:"flex justify-evenly items-center"},Ie={key:0},Ue={key:1},je={key:2},Ee={key:0,class:"mt-4"},Te={class:"grid grid-cols-3 justify-items-center"},De=m(()=>e("div",{class:"col-start-2 font-medium text-2xl mb-6"},[e("h1",null,"Profile")],-1)),Re={class:"justify-self-end"},Ve={key:1},Ne={class:"mt-8"},ze={class:"grid grid-cols-2 gap-4"},Le={class:"grid grid-rows-2 gap-4 p-4 size-full"},Me={class:"text-center font-medium"},Ye=m(()=>e("h1",null,"Social Networks",-1)),Ke={class:"flex md:flex-wrap max-md:flex-col justify-center md:space-x-4 text-4xl mt-4 max-md:text-lg"},qe=m(()=>e("i",{class:"fa-brands fa-facebook text-blue-700"},null,-1)),Qe=m(()=>e("i",{class:"fa-brands fa-instagram text-red-700"},null,-1)),Xe=m(()=>e("i",{class:"fa-solid fa-link text-white"},null,-1)),He=m(()=>e("i",{class:"fa-brands fa-youtube text-red-700"},null,-1)),Je={class:"font-medium text-center"},We={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},Ze={class:"flex items-center justify-center min-h-screen"},et={class:"bg-white p-6 rounded-center min-h-screen"},tt=m(()=>e("h2",{class:"text-xl mb-4"},"Edit Bio",-1)),ot={class:"container mx-auto"},st={class:"flex justify-evenly mb-4"},at={class:"container mx-auto w-3/4 overflow-hidden overflow-y-scroll"},lt={key:0,class:"grid grid-cols-1 overflow-hidden overflow-y-scroll"},rt={class:"h-96 mb-5"},nt={key:1,class:"grid grid-cols-1 overflow-hidden overflow-y-scroll"},it={key:1,class:"mt-4"},dt={class:"text-center font-medium text-2xl mb-6"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden overflow-y-scroll"},ut={key:2,class:"grid grid-cols-2 p-2 mt-3 gap-4"},ft={class:"mb-3"},mt=m(()=>e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Allergies")],-1)),gt={class:"flex flex-col space-y-4 p-6 mx-auto"},vt={class:"container mx-auto row-start-2 row-span-2"},pt=m(()=>e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Your Food Allergies")],-1)),ht={class:"p-7 h-28 overflow-hidden overflow-x-scroll"},_t={class:"grid grid-rows-1 grid-flow-col gap-3 justify-items-center space-x-1"},wt=["onClick"],xt={class:"container row-span-2"},bt={class:"grid grid-cols-1 h-96 font-medium text-2xl"},yt=m(()=>e("div",{class:"text-center"},[e("h3",null,"Account Stats")],-1)),kt={class:"container mt-2"},Ct={class:"font-normal text-xl"},Ot={key:3,class:"mt-2"},Ft=m(()=>e("div",{class:"text-center mb-5 font-medium text-2xl"},[e("h1",null,"Account Settings")],-1)),Pt={class:"grid grid-cols-3 gap-4 px-8 pb-8"},$t={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},St={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},At={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Bt={__name:"Show",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(p){const{props:a}=ne(),q=u(a.recipes||[]),G=u(a.user.cover_image_url||"/images/placeholders/default-cover.png"),I=u(a.user.profile_image_url||"/images/placeholders/default-profile.png"),U=u(null),j=u(null),S=u(!1),g=u("public-profile"),A=u(!1),k=u(a.user.bio||""),E=u(a.followers||[]),B=u(a.followersCount||0),Q=u(a.recipeCount||0),T=u(a.following||[]),x=u("following"),X=()=>{A.value=!0},D=()=>{A.value=!1},H=async()=>{try{await v.post("/profile/update-bio",{bio:k.value}),a.user.bio=k.value,D()}catch{alert("Failed to update bio.")}},J=async()=>{try{const t=await v.get(`/profile/${a.user.id}/followers`);E.value=t.data.followers}catch{console.log("Error fetching followers:")}},W=async()=>{try{const t=await v.get(`/profile/${a.user.id}/following`);T.value=t.data.following}catch{console.log("Error fetching following:")}};J(),W();const Z=()=>{S.value=!S.value},ee=t=>{const o=t.target.files[0];if(o){const s=new FileReader;s.onload=y=>{G.value=y.target.result},s.readAsDataURL(o)}U.value=o,R("cover_image",U.value)},te=t=>{const o=t.target.files[0];if(o){const s=new FileReader;s.onload=y=>{I.value=y.target.result},s.readAsDataURL(o)}j.value=o,R("profile_image",j.value)},R=async(t,o)=>{const s=new FormData;s.append(t,o);try{await v.post("/profile/update",s,{headers:{"Content-Type":"multipart/form-data"}})}catch{alert("Failed to update profile.")}},C=async t=>{g.value=t},V=t=>{x.value=t},b=u(""),h=u(a.user.allergens||[]),N=async()=>{if(!b.value.trim())return;const t=b.value.trim().toLowerCase();if(!h.value.includes(t))try{const o=await v.post("/profile/update-allergens",{allergens:[...h.value,t]});h.value=o.data.allergens,b.value=""}catch{alert("Failed to update allergens.")}},oe=async t=>{try{const o=await v.post("/profile/update-allergens",{allergens:h.value.filter(s=>s!==t)});h.value=o.data.allergens}catch{alert("Failed to delete allergy.")}},se=async()=>{try{(await v.post(`/profile/${a.user.name}/follow`)).status===200&&(a.isFollowing=!0,B.value+=1)}catch(t){console.log("Error following user",t)}},ae=async()=>{try{(await v.post(`/profile/${a.user.name}/unfollow`)).status===200&&(a.isFollowing=!1,B.value-=1)}catch(t){console.log("Error unfollowing user:",t)}},le=async t=>{try{await v.post(`/recipes/${t.id}/bookmark`),t.is_bookmarked=!t.is_bookmarked}catch(o){console.log("Error bookmarking recipe:",o)}},re=t=>{Y.get(`/recipes/${t}`)},z=t=>{Y.get(`/profile/${t}`)};return(t,o)=>(l(),O(fe,null,{default:d(()=>[e("div",_e,[e("img",{src:G.value,alt:"cover art",class:"w-full h-60 object-cover"},null,8,we),e("div",xe,[e("div",be,[e("img",{src:I.value,alt:"profile image",class:"w-24 h-24 rounded-full border-4 border-white object-cover cursor-pointer"},null,8,ye),n(a).isOwnProfile?(l(),r("input",{key:0,type:"file",onChange:te,accept:"image/*",class:"absolute top-0 left-0 opacity-0 cursor-pointer w-full h-full"},null,32)):c("",!0),e("div",ke,[e("h1",null,_(n(a).user.name),1)])])]),n(a).isOwnProfile?(l(),r("div",Ce,[e("button",{onClick:Z,class:"text-mintGreen hover:text-blue-600"},Fe),S.value?(l(),r("div",Pe,[e("label",$e,[e("input",{type:"file",onChange:ee,accept:"image/*",class:"hidden"},null,32),ie(" Upload Cover Art ")])])):c("",!0)])):c("",!0)]),e("div",Se,[e("div",Ae,[i(f,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Be,[e("ul",Ge,[e("li",null,[e("button",{onClick:o[0]||(o[0]=s=>C("public-profile")),class:w([{"text-mintGreen":g.value==="public-profile"},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-medium"])}," Profile ",2)]),n(a).isOwnProfile?c("",!0):(l(),r("li",Ie,[e("button",{onClick:o[1]||(o[1]=s=>C("recipes")),class:w([{"text-mintGreen":g.value==="recipes"},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-medium"])}," Recipes ",2)])),n(a).isOwnProfile?(l(),r("li",Ue,[n(a).isOwnProfile?(l(),r("button",{key:0,onClick:o[2]||(o[2]=s=>C("account-info")),class:w([{"text-mintGreen":g.value==="account-info"},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-medium"])}," Account Info ",2)):c("",!0)])):c("",!0),n(a).isOwnProfile?(l(),r("li",je,[n(a).isOwnProfile?(l(),r("button",{key:0,onClick:o[3]||(o[3]=s=>C("settings")),class:w([{"text-mintGreen":g.value==="settings"},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-medium"])}," Settings ",2)):c("",!0)])):c("",!0)])])]),_:1})]),g.value==="public-profile"?(l(),r("div",Ee,[i(f,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:d(()=>[e("div",Te,[De,e("div",Re,[n(a).isOwnProfile?(l(),r("button",{key:0,onClick:X,class:"bg-darkOrange text-mintGreen p-2 rounded"},"Edit Bio")):c("",!0),n(a).auth.user.id!==n(a).user.id?(l(),r("div",Ve,[n(a).isFollowing?(l(),r("button",{key:1,onClick:ae,class:"bg-red-500 text-mintGreen p-2 rounded"}," Unfollow ")):(l(),r("button",{key:0,onClick:se,class:"bg-blue-500 text-mintGreen p-2 rounded"},"Follow "))])):c("",!0)])]),e("div",Ne,[e("div",ze,[e("div",null,[i(f,{class:"container rounded-lg shadow-xl transform transition-transform h-96"},{default:d(()=>[e("div",Le,[e("div",null,[e("div",Me,[Ye,e("div",Ke,[i(n(F),null,{default:d(()=>[qe]),_:1}),i(n(F),null,{default:d(()=>[Qe]),_:1}),i(n(F),null,{default:d(()=>[Xe]),_:1}),i(n(F),null,{default:d(()=>[He]),_:1})])])]),e("div",Je,[e("p",null,_(n(a).user.bio||"No bio available"),1)])])]),_:1})]),A.value?(l(),r("div",We,[e("div",Ze,[e("div",et,[tt,L(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=s=>k.value=s),class:"w-full p-2 border rounded mb-4",rows:"4"},null,512),[[M,k.value]]),e("button",{onClick:H,class:"bg-green-500 text-mintGreen p-2 rounded"},"Save "),e("button",{onClick:D,class:"bg-red-500 text-mintGreen p-2 rounded"}," Cancel ")])])])):c("",!0),e("div",null,[e("div",ot,[i(f,{class:"rounded-lg shadow-xl transform transition-transform space-y-1 mx-auto h-96"},{default:d(()=>[e("ul",st,[e("li",null,[e("button",{onClick:o[5]||(o[5]=s=>V("followers")),class:w([{"text-mintGreen":x.value==="followers"},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-medium"])}," Followers ",2)]),e("li",null,[e("button",{onClick:o[6]||(o[6]=s=>V("following")),class:w([{"text-mintGreen":x.value==="following"},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-medium"])}," Following ",2)])]),e("div",at,[x.value==="followers"?(l(),r("ul",lt,[e("li",rt,[(l(!0),r(P,null,$(E.value,s=>(l(),O(K,{user:s,key:s.id,navigateToUserProfile:z,class:"mb-2"},null,8,["user"]))),128))])])):c("",!0),x.value==="following"?(l(),r("ul",nt,[e("li",null,[(l(!0),r(P,null,$(T.value,s=>(l(),O(K,{user:s,key:s.id,navigateToUserProfile:z,class:"mb-2"},null,8,["user"]))),128))])])):c("",!0)])]),_:1})])])])])]),_:1})])):c("",!0),g.value==="recipes"?(l(),r("div",it,[i(f,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:d(()=>[e("div",dt,[e("h1",null,_(n(a).user.name)+"'s Recipes",1)]),e("div",ct,[(l(!0),r(P,null,$(q.value,s=>(l(),O(pe,{key:s.id,recipe:s,onToggleBookmark:le,navigateToRecipe:re,class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},null,8,["recipe"]))),128))])]),_:1})])):c("",!0),g.value==="account-info"&&n(a).isOwnProfile?(l(),r("div",ut,[e("div",null,[e("div",ft,[i(f,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 w-3/4 mx-auto"},{default:d(()=>[mt,e("div",gt,[L(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>b.value=s),onKeyup:de(N,["enter"]),placeholder:"wheat, soy, eggs",class:"rounded-xl"},null,544),[[M,b.value]]),e("button",{onClick:N,class:"bg-gradient-to-b from-darkOrange to-darkOrange p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-mediump-2 rounded-xl"}," Save ")])]),_:1})]),e("div",vt,[i(f,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[pt,e("div",ht,[e("ul",_t,[(l(!0),r(P,null,$(h.value,s=>(l(),r("li",{key:s,class:"relative font-medium bg-darkOrange text-mintGreen rounded-xl p-3 px-7 min-w-[120px] text-center shadow-md"},[e("span",null,_(s.charAt(0).toUpperCase()+s.slice(1)),1),e("button",{onClick:y=>oe(s),class:"absolute top-1 right-1 text-red-600 font-bold"},"X ",8,wt)]))),128))])])]),_:1})])]),e("div",xt,[i(f,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",bt,[e("div",null,[yt,e("div",kt,[i(f,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Ct,[e("p",null,"You have created "+_(Q.value)+" recipes so far way to go !",1),e("p",null,"You have "+_(B.value)+" followers !",1)])]),_:1})])])])]),_:1})])])):c("",!0),g.value==="settings"&&n(a).isOwnProfile?(l(),r("div",Ot,[i(f,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[Ft,e("div",Pt,[i(f,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",$t,[i(ve,{"must-verify-email":p.mustVerifyEmail,status:p.status},null,8,["must-verify-email","status"])])]),_:1}),i(f,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",St,[i(ge)])]),_:1}),i(f,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",At,[i(me)])]),_:1})])]),_:1})])):c("",!0)])]),_:1}))}},Lt=he(Bt,[["__scopeId","data-v-d5cb5a95"]]);export{Lt as default};
