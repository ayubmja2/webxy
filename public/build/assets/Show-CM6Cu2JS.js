import{o as s,c as n,F as b,m as y,a as e,t as x,n as q,q as F,Q as de,l as c,f as C,w as d,u,h as _,e as ue,b as r,i as I,k as fe,p as me,C as _e,x as pe,y as ge,s as L}from"./app-CpHha_yx.js";import{_ as he,P as p}from"./Panel-D_C7VZXk.js";import ve from"./DeleteUserForm-yz3TFVRg.js";import we from"./UpdatePasswordForm-dHc8CSDl.js";import xe from"./UpdateProfileInformationForm-CMggv7wP.js";import{_ as be}from"./RecipeCard-DYoNEdvS.js";import{_ as M,d as ye}from"./Debounce-BXoqyiwV.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-e52y1bYd.js";import"./TextInput-CPA8XdkX.js";import"./PrimaryButton-B0mSxNn1.js";const Se={class:"flex justify-evenly items-center"},Ce=["onClick"],Fe={__name:"SectionNavigation",props:{currentSection:String,options:Array},emits:["switch-section"],setup(a,{emit:t}){const v=t,g=m=>{v("switch-section",m)};return(m,w)=>(s(),n("ul",Se,[(s(!0),n(b,null,y(a.options,f=>(s(),n("li",{key:f.value},[e("button",{onClick:()=>g(f.value),class:q([{"text-mintGreen":a.currentSection===f.value},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform"])},x(f.label),11,Ce)]))),128))]))}},$e={class:"flex justify-evenly mb-10"},Be=["onClick"],Pe={__name:"FollowerNavigation",props:{currentFollowerSection:String,options:Array},emits:["switch-follower-section"],setup(a,{emit:t}){const v=t,g=m=>{v("switch-follower-section",m)};return(m,w)=>(s(),n("ul",$e,[(s(!0),n(b,null,y(a.options,f=>(s(),n("li",{key:f.value},[e("button",{onClick:()=>g(f.value),class:q([{"text-mintGreen":a.currentFollowerSection===f.value},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform"])},x(f.label),11,Be)]))),128))]))}},Y=(a,t,v)=>{const g=a.target.files[0];if(g){const m=new FileReader;m.onload=w=>{t.value=w.target.result},m.readAsDataURL(g)}v.value=g},O=async(a,t={})=>{try{return await F.post(a,t)}catch(v){throw alert("An error occurred GG while making the request."),v}},Ae={class:"fixed z-10 inset-0 overflow-y-auto"},Ie={class:"flex items-center justify-center min-h-screen"},Oe={class:"bg-white p-6 rounded-center min-h-screen"},Ge=e("h2",{class:"text-xl mb-4"},"Edit Bio",-1),Ue=["value"],je={__name:"BioModal",props:{bio:String,saveBio:Function,closeModal:Function},emits:["update:bio"],setup(a,{emit:t}){const v=t,g=m=>{v("update:bio",m.target.value)};return(m,w)=>(s(),n("div",Ae,[e("div",Ie,[e("div",Oe,[Ge,e("textarea",{value:a.bio,onInput:g,class:"w-full p-2 border rounded mb-4",rows:"4"},null,40,Ue),e("button",{onClick:w[0]||(w[0]=(...f)=>a.saveBio&&a.saveBio(...f)),class:"bg-green-500 text-mintGreen p-2 rounded"},"Save"),e("button",{onClick:w[1]||(w[1]=(...f)=>a.closeModal&&a.closeModal(...f)),class:"bg-red-500 text-mintGreen p-2 rounded"},"Cancel")])])]))}},h=a=>(pe("data-v-06e0595a"),a=a(),ge(),a),Ee={class:"relative"},Te=["src"],Me={class:"absolute bottom-0 left-0 right-0 flex items-center justify-center mt-4"},Ne={class:"relative"},De=["src"],Ve={class:"text-2xl font-medium text-black text-center mt-2 mb-2 p-2"},Re={key:0,class:"absolute top-0 right-0 m-4"},ze=h(()=>e("i",{class:"fa-solid fa-gear fa-2x"},null,-1)),Le=[ze],Ye={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg z-20"},qe={class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer"},Ke={class:"px-10"},Qe={class:"mx-auto mt-4"},Xe={class:"container mx-auto"},He={key:0,class:"mt-4"},Je={class:"grid grid-cols-3 justify-items-center"},We=h(()=>e("div",{class:"col-start-2 font-medium text-2xl mb-6"},[e("h1",null,"Profile")],-1)),Ze={class:"justify-self-end"},et={key:2},tt={class:"mt-8"},ot={class:"grid grid-cols-2 gap-4"},st={class:"grid grid-rows-2 gap-4 p-4 size-full"},lt={class:"text-center font-medium"},nt=h(()=>e("h1",null,"Social Networks",-1)),at={class:"flex md:flex-wrap max-md:flex-col justify-center md:space-x-4 text-4xl mt-4 max-md:text-lg"},rt=h(()=>e("i",{class:"fa-brands fa-facebook text-blue-700"},null,-1)),it=h(()=>e("i",{class:"fa-brands fa-instagram text-red-700"},null,-1)),ct=h(()=>e("i",{class:"fa-solid fa-link text-white"},null,-1)),dt=h(()=>e("i",{class:"fa-brands fa-youtube text-red-700"},null,-1)),ut={class:"font-medium text-center"},ft={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},mt={class:"flex items-center justify-center min-h-screen"},_t={class:"bg-white p-6 rounded-center min-h-screen"},pt=h(()=>e("h2",{class:"text-xl mb-4"},"Edit Bio",-1)),gt=["value"],ht={class:"container mx-auto"},vt={class:"container"},wt={key:0,class:"grid grid-cols-1"},xt={class:"h-96 mb-5"},bt={key:1,class:"grid grid-cols-1"},yt={key:0},kt={key:1,class:"mt-4"},St={class:"text-center font-medium text-2xl mb-6"},Ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden overflow-y-scroll"},Ft={key:2,class:"grid grid-cols-2 p-2 mt-3 gap-4"},$t={class:"mb-3"},Bt=h(()=>e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Allergies")],-1)),Pt={class:"flex flex-col space-y-4 p-6 mx-auto"},At={class:"container mx-auto row-start-2 row-span-2"},It=h(()=>e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Your Food Allergies")],-1)),Ot={class:"p-7 h-28 overflow-hidden overflow-x-scroll"},Gt={class:"grid grid-rows-1 grid-flow-col gap-3 justify-items-center space-x-1"},Ut=["onClick"],jt={class:"container row-span-2"},Et={class:"grid grid-cols-1 h-96 font-medium text-2xl"},Tt=h(()=>e("div",{class:"text-center"},[e("h3",null,"Account Stats")],-1)),Mt={class:"container mt-2"},Nt={class:"font-normal text-xl"},Dt={key:3,class:"mt-2"},Vt=h(()=>e("div",{class:"text-center mb-5 font-medium text-2xl"},[e("h1",null,"Account Settings")],-1)),Rt={class:"grid grid-cols-3 gap-4 px-8 pb-8"},zt={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Lt={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Yt={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},qt={__name:"Show",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(a){const{props:t}=de(),v=c(t.recipes||[]),g=c(t.user.cover_image_url||"/images/placeholders/default-cover.png"),m=c(t.user.profile_image_url||"/images/placeholders/default-profile.png"),w=c(null),f=c(null),G=c(!1),k=c("public-profile"),A=c(!1),$=c(t.user.bio||""),U=c(t.followers||[]),j=c(t.followersCount||0),K=c(t.recipeCount||0),N=c(t.following||[]),B=c("following"),Q=c([{value:"followers",label:"Followers"},{value:"following",label:"Following"}]),X=c([{value:"public-profile",label:"Profile"},{value:"recipes",label:"Recipes"},{value:"account-info",label:"Account Info"},{value:"settings",label:"Settings"}]),H=()=>{A.value=!0},E=()=>{A.value=!1},D=async()=>{try{await O("/profile/update-bio",{bio:$.value}),t.user.bio=$.value,E()}catch{}},J=async()=>{try{const o=await F.get(`/profile/${t.user.id}/followers`);U.value=o.data.followers}catch{console.log("Error fetching followers:")}},W=async()=>{try{const o=await F.get(`/profile/${t.user.id}/following`);N.value=o.data.following}catch{console.log("Error fetching following:")}};J(),W();const Z=()=>{G.value=!G.value},ee=o=>{Y(o,g,w),V("cover_image",w.value)},te=o=>{Y(o,m,f),V("profile_image",f.value)},V=async(o,i)=>{const l=new FormData;l.append(o,i);try{await F.post("/profile/update",l,{headers:{"Content-Type":"multipart/form-data"}})}catch{alert("Failed to update profile.")}},oe=async o=>{k.value=o},se=o=>{B.value=o},P=c(""),S=c(t.user.allergens||[]),R=async()=>{if(!P.value.trim())return;const o=P.value.trim().toLowerCase();if(!S.value.includes(o))try{const i=await F.post("/profile/update-allergens",{allergens:[...S.value,o]});S.value=i.data.allergens,P.value=""}catch{alert("Failed to update allergens.")}},z=ye(R,300),le=async o=>{try{const i=await F.post("/profile/update-allergens",{allergens:S.value.filter(l=>l!==o)});S.value=i.data.allergens}catch{alert("Failed to delete allergy.")}},ne=async()=>{try{(await O(`/profile/${t.user.name}/follow`)).status===200&&(t.isFollowing=!0,j.value+=1)}catch{}},ae=async()=>{try{(await O(`/profile/${t.user.name}/unfollow`)).status===200&&(t.isFollowing=!1,j.value-=1)}catch(o){console.log("Error unfollowing user:",o)}},re=async o=>{try{await O(`/recipes/${o.id}/bookmark`),o.is_bookmarked=!o.is_bookmarked}catch(i){console.log("Error bookmarking recipe:",i)}},ie=o=>{L.get(`/recipes/${o}`)},T=o=>{L.get(`/profile/${o}`)};return(o,i)=>(s(),C(he,null,{default:d(()=>[e("div",Ee,[e("img",{src:g.value,alt:"cover art",class:"w-full h-60 object-cover"},null,8,Te),e("div",Me,[e("div",Ne,[e("img",{src:m.value,alt:"profile image",class:"w-24 h-24 rounded-full border-4 border-white object-cover cursor-pointer"},null,8,De),u(t).isOwnProfile?(s(),n("input",{key:0,type:"file",onChange:te,accept:"image/*",class:"absolute top-0 left-0 opacity-0 cursor-pointer w-full h-full"},null,32)):_("",!0),e("div",Ve,[e("h1",null,x(u(t).user.name),1)])])]),u(t).isOwnProfile?(s(),n("div",Re,[e("button",{onClick:Z,class:"text-mintGreen hover:text-blue-600"},Le),G.value?(s(),n("div",Ye,[e("label",qe,[e("input",{type:"file",onChange:ee,accept:"image/*",class:"hidden"},null,32),ue(" Upload Cover Art ")])])):_("",!0)])):_("",!0)]),e("div",Ke,[e("div",Qe,[r(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Xe,[r(Fe,{currentSection:k.value,options:X.value,onSwitchSection:oe},null,8,["currentSection","options"])])]),_:1})]),k.value==="public-profile"?(s(),n("div",He,[r(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:d(()=>[e("div",Je,[We,e("div",Ze,[u(t).isOwnProfile?(s(),n("button",{key:0,onClick:H,class:"bg-darkOrange text-mintGreen p-2 rounded"},"Edit Bio")):_("",!0),A.value?(s(),C(je,{key:1,bio:$.value,"onUpdate:bio":i[0]||(i[0]=l=>$.value=l),saveBio:D,closeModal:E},null,8,["bio"])):_("",!0),u(t).auth.user.id!==u(t).user.id?(s(),n("div",et,[u(t).isFollowing?(s(),n("button",{key:1,onClick:ae,class:"bg-red-500 text-mintGreen p-2 rounded"}," Unfollow ")):(s(),n("button",{key:0,onClick:ne,class:"bg-blue-500 text-mintGreen p-2 rounded"},"Follow "))])):_("",!0)])]),e("div",tt,[e("div",ot,[e("div",null,[r(p,{class:"container rounded-lg shadow-xl transform transition-transform h-96"},{default:d(()=>[e("div",st,[e("div",null,[e("div",lt,[nt,e("div",at,[r(u(I),null,{default:d(()=>[rt]),_:1}),r(u(I),null,{default:d(()=>[it]),_:1}),r(u(I),null,{default:d(()=>[ct]),_:1}),r(u(I),null,{default:d(()=>[dt]),_:1})])])]),e("div",ut,[e("p",null,x(u(t).user.bio||"No bio available"),1)])])]),_:1})]),A.value?(s(),n("div",ft,[e("div",mt,[e("div",_t,[pt,e("textarea",{value:$.value,onInput:i[1]||(i[1]=l=>o.$emit("update:bio",l.target.value)),class:"w-full p-2 border rounded mb-4",rows:"4"},null,40,gt),e("button",{onClick:D,class:"bg-green-500 text-mintGreen p-2 rounded"},"Save "),e("button",{onClick:E,class:"bg-red-500 text-mintGreen p-2 rounded"}," Cancel ")])])])):_("",!0),e("div",null,[e("div",ht,[r(p,{class:"rounded-lg shadow-xl transform transition-transform space-y-1 mx-auto h-96 overflow-hidden overflow-y-scroll"},{default:d(()=>[r(Pe,{currentFollowerSection:B.value,options:Q.value,onSwitchFollowerSection:se},null,8,["currentFollowerSection","options"]),e("div",vt,[B.value==="followers"?(s(),n("ul",wt,[e("li",xt,[(s(!0),n(b,null,y(U.value,l=>(s(),C(M,{user:l,key:l.id,navigateToUserProfile:T},null,8,["user"]))),128))])])):_("",!0),B.value==="following"?(s(),n("ul",bt,[e("li",null,[(s(!0),n(b,null,y(N.value,l=>(s(),C(M,{user:l,key:l.id,navigateToUserProfile:T},null,8,["user"]))),128))])])):_("",!0)]),e("div",null,[B.value==="followers"?(s(),n("ul",yt,[e("li",null,[(s(!0),n(b,null,y(U.value,l=>(s(),C(M,{user:l,key:l.id,navigateToUserProfile:T},null,8,["user"]))),128))])])):_("",!0)])]),_:1})])])])])]),_:1})])):_("",!0),k.value==="recipes"?(s(),n("div",kt,[r(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:d(()=>[e("div",St,[e("h1",null,x(u(t).user.name)+"'s Recipes",1)]),e("div",Ct,[(s(!0),n(b,null,y(v.value,l=>(s(),C(be,{key:l.id,recipe:l,onToggleBookmark:re,navigateToRecipe:ie,class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},null,8,["recipe"]))),128))])]),_:1})])):_("",!0),k.value==="account-info"&&u(t).isOwnProfile?(s(),n("div",Ft,[e("div",null,[e("div",$t,[r(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 w-3/4 mx-auto"},{default:d(()=>[Bt,e("div",Pt,[fe(e("input",{type:"text","onUpdate:modelValue":i[2]||(i[2]=l=>P.value=l),onKeyup:i[3]||(i[3]=_e((...l)=>u(z)&&u(z)(...l),["enter"])),placeholder:"wheat, soy, eggs",class:"rounded-xl"},null,544),[[me,P.value]]),e("button",{onClick:R,class:"bg-gradient-to-b from-darkOrange to-darkOrange p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-mediump-2 rounded-xl"}," Save ")])]),_:1})]),e("div",At,[r(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[It,e("div",Ot,[e("ul",Gt,[(s(!0),n(b,null,y(S.value,l=>(s(),n("li",{key:l,class:"relative font-medium bg-darkOrange text-mintGreen rounded-xl p-3 px-7 min-w-[120px] text-center shadow-md"},[e("span",null,x(l.charAt(0).toUpperCase()+l.slice(1)),1),e("button",{onClick:ce=>le(l),class:"absolute top-1 right-1 text-red-600 font-bold"},"X ",8,Ut)]))),128))])])]),_:1})])]),e("div",jt,[r(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Et,[e("div",null,[Tt,e("div",Mt,[r(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Nt,[e("p",null,"You have created "+x(K.value)+" recipes so far way to go !",1),e("p",null,"You have "+x(j.value)+" followers !",1)])]),_:1})])])])]),_:1})])])):_("",!0),k.value==="settings"&&u(t).isOwnProfile?(s(),n("div",Dt,[r(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[Vt,e("div",Rt,[r(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",zt,[r(xe,{"must-verify-email":a.mustVerifyEmail,status:a.status},null,8,["must-verify-email","status"])])]),_:1}),r(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Lt,[r(we)])]),_:1}),r(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:d(()=>[e("div",Yt,[r(ve)])]),_:1})])]),_:1})])):_("",!0)])]),_:1}))}},lo=ke(qt,[["__scopeId","data-v-06e0595a"]]);export{lo as default};
