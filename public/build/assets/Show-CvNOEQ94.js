import{Q as V,l as F,x as $,q,K as Q,f as O,w as L,o as v,a as u,d as j,t as _,u as m,c as g,k as R,D as T,i as U,e as Z,h as C,m as B,F as I}from"./app-B0POS_qi.js";import{_ as K,P as A}from"./Panel-Cm2YOkga.js";import"./ApplicationLogo-1RqGdrda.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var X=2e3,r={s:1,n:0,d:1};function N(t,s){if(isNaN(t=parseInt(t,10)))throw D();return t*s}function f(t,s){if(s===0)throw S();var i=Object.create(y.prototype);i.s=t<0?-1:1,t=t<0?-t:t;var n=M(t,s);return i.n=t/n,i.d=s/n,i}function P(t){for(var s={},i=t,n=2,a=4;a<=i;){for(;i%n===0;)i/=n,s[n]=(s[n]||0)+1;a+=1+2*n++}return i!==t?i>1&&(s[i]=(s[i]||0)+1):s[t]=(s[t]||0)+1,s}var w=function(t,s){var i=0,n=1,a=1,h=0,d=0,k=0,b=1,x=1,o=0,e=1,c=1,l=1,p=1e7,E;if(t!=null)if(s!==void 0){if(i=t,n=s,a=i*n,i%1!==0||n%1!==0)throw J()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)i=t.n,n=t.d,"s"in t&&(i*=t.s);else if(0 in t)i=t[0],1 in t&&(n=t[1]);else throw D();a=i*n;break}case"number":{if(t<0&&(a=t,t=-t),t%1===0)i=t;else if(t>0){for(t>=1&&(x=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=x);e<=p&&l<=p;)if(E=(o+c)/(e+l),t===E){e+l<=p?(i=o+c,n=e+l):l>e?(i=c,n=l):(i=o,n=e);break}else t>E?(o+=c,e+=l):(c+=o,l+=e),e>p?(i=c,n=l):(i=o,n=e);i*=x}else(isNaN(t)||isNaN(s))&&(n=i=NaN);break}case"string":{if(e=t.match(/\d+|./g),e===null)throw D();if(e[o]==="-"?(a=-1,o++):e[o]==="+"&&o++,e.length===o+1?d=N(e[o++],a):e[o+1]==="."||e[o]==="."?(e[o]!=="."&&(h=N(e[o++],a)),o++,(o+1===e.length||e[o+1]==="("&&e[o+3]===")"||e[o+1]==="'"&&e[o+3]==="'")&&(d=N(e[o],a),b=Math.pow(10,e[o].length),o++),(e[o]==="("&&e[o+2]===")"||e[o]==="'"&&e[o+2]==="'")&&(k=N(e[o+1],a),x=Math.pow(10,e[o+1].length)-1,o+=3)):e[o+1]==="/"||e[o+1]===":"?(d=N(e[o],a),b=N(e[o+2],1),o+=3):e[o+3]==="/"&&e[o+1]===" "&&(h=N(e[o],a),d=N(e[o+2],a),b=N(e[o+4],1),o+=5),e.length<=o){n=b*x,a=i=k+n*h+x*d;break}}default:throw D()}if(n===0)throw S();r.s=a<0?-1:1,r.n=Math.abs(i),r.d=Math.abs(n)};function Y(t,s,i){for(var n=1;s>0;t=t*t%i,s>>=1)s&1&&(n=n*t%i);return n}function G(t,s){for(;s%2===0;s/=2);for(;s%5===0;s/=5);if(s===1)return 0;for(var i=10%s,n=1;i!==1;n++)if(i=i*10%s,n>X)return 0;return n}function H(t,s,i){for(var n=1,a=Y(10,i,s),h=0;h<300;h++){if(n===a)return h;n=n*10%s,a=a*10%s}return 0}function M(t,s){if(!t)return s;if(!s)return t;for(;;){if(t%=s,!t)return s;if(s%=t,!s)return t}}function y(t,s){if(w(t,s),this instanceof y)t=M(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t;else return f(r.s*r.n,r.d)}var S=function(){return new Error("Division by Zero")},D=function(){return new Error("Invalid argument")},J=function(){return new Error("Parameters must be integer")};y.prototype={s:1,n:0,d:1,abs:function(){return f(this.n,this.d)},neg:function(){return f(-this.s*this.n,this.d)},add:function(t,s){return w(t,s),f(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,s){return w(t,s),f(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,s){return w(t,s),f(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,s){return w(t,s),f(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return f(this.s*this.n,this.d)},mod:function(t,s){if(isNaN(this.n)||isNaN(this.d))return new y(NaN);if(t===void 0)return f(this.s*this.n%this.d,1);if(w(t,s),r.n===0&&this.d===0)throw S();return f(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(t,s){return w(t,s),f(M(r.n,this.n)*M(r.d,this.d),r.d*this.d)},lcm:function(t,s){return w(t,s),r.n===0&&this.n===0?f(0,1):f(r.n*this.n,M(r.n,this.n)*M(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):f(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):f(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new y(NaN):f(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,s){return w(t,s),f(this.s*Math.round(this.n*r.d/(this.d*r.n))*r.n,r.d)},inverse:function(){return f(this.s*this.d,this.n)},pow:function(t,s){if(w(t,s),r.d===1)return r.s<0?f(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):f(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var i=P(this.n),n=P(this.d),a=1,h=1;for(var d in i)if(d!=="1"){if(d==="0"){a=0;break}if(i[d]*=r.n,i[d]%r.d===0)i[d]/=r.d;else return null;a*=Math.pow(d,i[d])}for(var d in n)if(d!=="1"){if(n[d]*=r.n,n[d]%r.d===0)n[d]/=r.d;else return null;h*=Math.pow(d,n[d])}return r.s<0?f(h,a):f(a,h)},equals:function(t,s){return w(t,s),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(t,s){w(t,s);var i=this.s*this.n*r.d-r.s*r.n*this.d;return(0<i)-(i<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var s=this.abs(),i=s.toContinued(),n=1;n<i.length;n++){for(var a=f(i[n-1],1),h=n-2;h>=0;h--)a=a.inverse().add(i[h]);if(Math.abs(a.sub(s).valueOf())<t)return a.mul(this.s)}return this},divisible:function(t,s){return w(t,s),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var s,i="",n=this.n,a=this.d;return this.s<0&&(i+="-"),a===1?i+=n:(t&&(s=Math.floor(n/a))>0&&(i+=s,i+=" ",n%=a),i+=n,i+="/",i+=a),i},toLatex:function(t){var s,i="",n=this.n,a=this.d;return this.s<0&&(i+="-"),a===1?i+=n:(t&&(s=Math.floor(n/a))>0&&(i+=s,n%=a),i+="\\frac{",i+=n,i+="}{",i+=a,i+="}"),i},toContinued:function(){var t,s=this.n,i=this.d,n=[];if(isNaN(s)||isNaN(i))return n;do n.push(Math.floor(s/i)),t=s%i,s=i,i=t;while(s!==1);return n},toString:function(t){var s=this.n,i=this.d;if(isNaN(s)||isNaN(i))return"NaN";t=t||15;var n=G(s,i),a=H(s,i,n),h=this.s<0?"-":"";if(h+=s/i|0,s%=i,s*=10,s&&(h+="."),n){for(var d=a;d--;)h+=s/i|0,s%=i,s*=10;h+="(";for(var d=n;d--;)h+=s/i|0,s%=i,s*=10;h+=")"}else for(var d=t;s&&d--;)h+=s/i|0,s%=i,s*=10;return h}};const W={class:"mx-6"},tt={class:"font-bold mb-6 flex justify-between mx-4"},st={key:0,class:"relative"},it={id:"dropdown-menu",class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20"},nt={class:"grid grid-cols-2 font-medium"},et={class:"flex flex-row justify-center"},rt=["src"],ot={class:"grid grid-rows-1 border-2 border-darkOrange p-4 rounded-lg shadow-md transform transition-transform"},at={class:"flex flex-col"},dt={class:"grid grid-rows-2 justify-items-center mx-20"},lt={class:"container text-center tracking-wide leading-loose"},ut={class:"grid grid-cols-2 flex-shrink mx-12"},ht={class:"flex flex-col flex-shrink"},ft={class:"flex"},ct={class:"flex flex-wrap gap-2"},vt={key:0},mt={class:"grid grid-cols-2 max-md:text-sm max-md:font-thin"},gt={class:"grid grid-rows-1 justify-items-center"},wt={class:"text-center mt-2 space-y-2"},_t={key:0},xt={key:1},Nt={class:"container flex-none"},pt={class:"grid grid-rows-1 text-center flex-none"},yt={class:"grid grid-rows-1 grid-flow-col gap-2 text-md space-x-1 flex-none"},bt={key:0},Mt={class:"md:font-bold max-md:text-sm underline"},kt={class:"mt-3 space-y-2"},It={__name:"Show",setup(t){const{props:s}=V(),i=s.recipe,n=F({}),a=F(!1),h=e=>{const c=document.getElementById("dropdown-menu"),l=document.getElementById("ellipsis-icon");c&&l&&!c.contains(e.target)&&!l.contains(e.target)&&(a.value=!1)},d=e=>e.toLowerCase().trim().replace(/s$/,""),k=(s.auth.user.allergens||[]).map(e=>d(e)),b=i.ingredients.map(e=>d(e.name)),x=b.filter(e=>k.includes(e));$(()=>{document.addEventListener("click",h),q.post("https://sea-lion-app-fliok.ondigitalocean.app/suggest_substitutes",{ingredients:b,allergens:k}).then(e=>{console.log("Received sub:",e.data.substitutes),n.value=e.data.substitutes}).catch(e=>{console.error("Error fetching substitutions:",e)})}),Q(()=>{document.removeEventListener("click",h)});const o=e=>{try{return new y(e).toFraction(!0)}catch{return e}};return(e,c)=>(v(),O(K,null,{default:L(()=>[u("div",W,[j(A,{class:"flex flex-col mt-20 p-6 rounded-lg shadow-xl transform transition-transform"},{default:L(()=>[u("div",tt,[u("h1",null,_(m(i).title),1),m(i).user_id===m(s).auth.user.id?(v(),g("div",st,[u("i",{class:"fa-solid fa-ellipsis cursor-pointer",id:"ellipsis-icon",onClick:c[0]||(c[0]=l=>a.value=!a.value)}),R(u("div",it,[m(i).user_id===m(s).auth.user.id?(v(),O(m(U),{key:0,href:`/recipes/${m(i).id}/edit`,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:L(()=>c[1]||(c[1]=[Z("Edit Recipe")])),_:1},8,["href"])):C("",!0)],512),[[T,a.value]])])):C("",!0)]),u("div",nt,[u("div",null,[u("div",et,[m(i).image_url?(v(),g("img",{key:0,src:m(i).image_url,class:"rounded-lg shadow-2xl dark:shadow-darkOrange w-1/2",alt:"recipe image"},null,8,rt)):C("",!0)])]),u("div",ot,[u("div",at,[u("div",dt,[c[2]||(c[2]=u("div",{class:"my-auto font-bold text-xl underline"},[u("h1",null,"Instructions")],-1)),u("div",lt,_(m(i).instruction),1)])])])])]),_:1}),j(A,{class:"flex flex-col mt-8 p-6 rounded-lg shadow-xl transform transition-transform"},{default:L(()=>[u("div",ut,[u("div",ht,[c[3]||(c[3]=u("div",{class:"mx-auto font-bold max-md:text-sm underline mb-4"},[u("h1",null,"Allergies")],-1)),u("div",ft,[u("div",ct,[(v(!0),g(I,null,B(m(x),l=>(v(),g("span",{key:l,class:"bg-red-500 text-white rounded-2xl px-4 py-2"},_(l.charAt(0).toUpperCase()+l.slice(1)),1))),128)),m(x).length===0?(v(),g("span",vt,"No allergens found.")):C("",!0)])])]),u("div",mt,[u("div",gt,[c[4]||(c[4]=u("div",{class:"md:font-bold max-md:text-sm underline"},[u("h1",null,"Ingredients")],-1)),u("ul",wt,[(v(!0),g(I,null,B(m(i).ingredients,(l,p)=>(v(),g("li",{key:p},[["Large","Medium","Small"].includes(l.pivot.unit)?(v(),g("span",_t,_(o(l.pivot.quantity))+" "+_(o(l.pivot.unit))+" "+_(o(l.name)),1)):(v(),g("span",xt,_(o(l.pivot.quantity))+" "+_(o(l.pivot.unit))+" "+_(o(l.name)),1))]))),128))])]),u("div",Nt,[u("div",pt,[u("ul",yt,[(v(!0),g(I,null,B(m(i).ingredients,(l,p)=>(v(),g("li",{class:"mb-2",key:p},[n.value[d(l.name)]&&n.value[d(l.name)].length>0?(v(),g("span",bt,[u("span",Mt,"Substitutes for: "+_(l.name),1)])):C("",!0),u("ul",kt,[(v(!0),g(I,null,B(n.value[d(l.name)],(E,z)=>(v(),g("li",{key:z},_(E),1))),128))])]))),128))])])])])])]),_:1})])]),_:1}))}};export{It as default};
