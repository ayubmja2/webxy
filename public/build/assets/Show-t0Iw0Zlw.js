import{o as n,c as r,F as C,m as O,a as e,t as h,n as B,Q as ue,l as d,j as I,x as fe,f as P,w as c,u as i,h as _,e as me,d as a,i as T,k as pe,p as ge,B as ve,q as V,s as z}from"./app-B0POS_qi.js";import{_ as we,P as p}from"./Panel-Cm2YOkga.js";import _e from"./DeleteUserForm-DDDSzlKk.js";import he from"./UpdatePasswordForm-BB1bGMcF.js";import xe from"./UpdateProfileInformationForm-oaNu8Ps6.js";import{_ as be}from"./RecipeCard-CkqBh5q-.js";import{_ as ye}from"./UserCard-CyvjUzvu.js";import{d as W}from"./Debounce-DarU5fBN.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-1RqGdrda.js";import"./TextInput-Dm81xCsp.js";import"./PrimaryButton-B8AiQFL5.js";const Se={class:"flex justify-evenly items-center"},Ce=["onClick"],Oe={__name:"SectionNavigation",props:{currentSection:String,options:Array},emits:["switch-section"],setup(u,{emit:g}){const w=g,s=m=>{w("switch-section",m)};return(m,v)=>(n(),r("ul",Se,[(n(!0),r(C,null,O(u.options,f=>(n(),r("li",{key:f.value},[e("button",{onClick:()=>s(f.value),class:B([{"text-mintGreen":u.currentSection===f.value},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform"])},h(f.label),11,Ce)]))),128))]))}},Fe={class:"flex justify-evenly mb-10"},Pe=["onClick"],Te={__name:"FollowerNavigation",props:{currentFollowerSection:String,options:Array},emits:["switch-follower-section"],setup(u,{emit:g}){const w=g,s=m=>{w("switch-follower-section",m)};return(m,v)=>(n(),r("ul",Fe,[(n(!0),r(C,null,O(u.options,f=>(n(),r("li",{key:f.value},[e("button",{onClick:()=>s(f.value),class:B([{"text-mintGreen":u.currentFollowerSection===f.value},"bg-gradient-to-b from-darkOrange to-darkOrange rounded-2xl p-1 px-4 shadow-md transition transform"])},h(f.label),11,Pe)]))),128))]))}},Ee=(u,g,w)=>{const s=u.target.files[0];if(s){const m=new FileReader;m.onload=v=>{g.value=v.target.result},m.readAsDataURL(s)}w.value=s},Ue={class:"fixed z-10 inset-0 overflow-y-auto"},$e={class:"flex items-center justify-center min-h-screen"},Ie={class:"bg-white p-6 rounded-center min-h-screen"},Be=["value"],Ae={__name:"BioModal",props:{bio:String,saveBio:Function,closeModal:Function},emits:["update:bio"],setup(u,{emit:g}){const w=g,s=m=>{w("update:bio",m.target.value)};return(m,v)=>(n(),r("div",Ue,[e("div",$e,[e("div",Ie,[v[2]||(v[2]=e("h2",{class:"text-xl mb-4"},"Edit Bio",-1)),e("textarea",{value:u.bio,onInput:s,class:"w-full p-2 border rounded mb-4",rows:"4"},null,40,Be),e("button",{onClick:v[0]||(v[0]=(...f)=>u.saveBio&&u.saveBio(...f)),class:"bg-green-500 text-mintGreen p-2 rounded"},"Save"),e("button",{onClick:v[1]||(v[1]=(...f)=>u.closeModal&&u.closeModal(...f)),class:"bg-red-500 text-mintGreen p-2 rounded"},"Cancel")])])]))}},Ne={class:"relative"},Le=["src"],Re={class:"absolute bottom-0 left-0 right-0 flex items-center justify-center mt-4"},Ge={class:"relative"},je=["src"],De={class:"text-2xl font-medium text-black text-center mt-2 mb-2 p-2"},Me={key:0,class:"absolute top-0 right-0 m-4"},Ve={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg z-20"},ze={class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer"},We={class:"px-10"},qe={class:"mx-auto mt-4"},Ye={class:"container mx-auto"},Ke={key:0,class:"mt-4"},Qe={class:"grid grid-cols-3 justify-items-center"},Xe={class:"justify-self-end"},He={key:1},Je={class:"mt-8"},Ze={class:"grid grid-cols-2 gap-4"},et={class:"grid grid-rows-2 gap-4 p-4 size-full"},tt={class:"text-center font-medium"},ot={class:"flex md:flex-wrap max-md:flex-col justify-center md:space-x-4 text-4xl mt-4 max-md:text-lg"},st={class:"font-medium text-center"},lt={class:"container"},nt={class:"container"},at={key:1,class:"mt-4"},rt={class:"text-center font-medium text-2xl mb-6"},it={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden overflow-y-scroll"},ct={key:2,class:"grid grid-cols-2 p-2 mt-3 gap-4"},dt={class:"mb-3"},ut={class:"flex flex-col space-y-4 p-6 mx-auto"},ft={class:"container mx-auto row-start-2 row-span-2"},mt={class:"p-7 h-28 overflow-hidden overflow-x-scroll"},pt={class:"grid grid-rows-1 grid-flow-col gap-3 justify-items-center space-x-1"},gt=["onClick"],vt={class:"container row-span-2"},wt={class:"grid grid-cols-1 h-96 font-medium text-2xl"},_t={class:"container mt-2"},ht={class:"font-normal text-xl"},xt={key:3,class:"mt-2"},bt={class:"grid grid-cols-3 gap-4 px-8 pb-8"},yt={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},kt={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},St={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Ct={__name:"Show",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(u){const g={PUBLIC_PROFILE:"public-profile",RECIPES:"recipes",ACCOUNT_INFO:"account-info",SETTINGS:"settings"},w={UPDATE_BIO:"/profile/update-bio",UPDATE_ALLERGENS:"/profile/update-allergens",FOLLOW_USER:o=>`/profile/${o}/follow`,UNFOLLOW_USER:o=>`/profile/${o}/unfollow`},{props:s}=ue(),m=d(s.user||{}),v=d(s.recipes||[]),f=d(s.user.cover_image_url||"/images/placeholders/default-cover.png"),A=d(s.user.profile_image_url||"/images/placeholders/default-profile.png"),q=d(null),Y=d(null),E=d(!1),y=d("public-profile"),U=d(!1),F=d(s.user.bio||""),N=d(s.followers||[]),L=d(s.followersCount||0),K=d(s.recipeCount||0),S=d(""),k=d(s.user.allergens||[]),R=d(s.following||[]),$=d("following"),x=async(o,t="POST",l=null)=>{try{const b={"Content-Type":l instanceof FormData?"multipart/form-data":"application/json"};return await V({method:t,url:o,data:l,headers:b})}catch{console.log(`Error during ${t} request to ${o}`)}},Q=I(()=>$.value==="followers"?N.value:R.value),X=I(()=>[{value:g.PUBLIC_PROFILE,label:"Profile"},{value:g.RECIPES,label:"Recipes"},{value:g.ACCOUNT_INFO,label:"Account Info"},{value:g.SETTINGS,label:"Settings"}]),H=I(()=>[{value:"followers",label:"Followers"},{value:"following",label:"Following"}]),J=async o=>{y.value=o},Z=o=>{$.value=o},ee=()=>U.value=!0,G=()=>U.value=!1,te=async()=>{try{await x(w.UPDATE_BIO,"POST",{bio:F.value})&&(m.value.bio=F.value,G())}catch(o){console.log("Error saving bio:",o)}};fe(async()=>{const o=await x(`/profile/${s.user.id}/followers`,"GET"),t=await x(`/profile/${s.user.id}/following`,"GET");o&&(N.value=o.data.followers),t&&(R.value=t.data.following)});const oe=()=>E.value=!E.value,se=async(o,t)=>{const l=new FormData;l.append(o,t);try{await V.post("/profile/update",l,{headers:{"Content-Type":"multipart/form-data"}})}catch{alert("Failed to update profile.")}},j=async(o,t,l,b)=>{Ee(o,t,b),await se(l,b.value)},le=o=>j(o,f,"cover_image",q),ne=o=>j(o,A,"profile_image",Y),D=async()=>{if(!S.value.trim())return;const o=S.value.trim().toLowerCase();if(!k.value.includes(o)){const t=await x("/profile/update-allergens","POST",{allergens:[...k.value,o]});t&&(k.value=t.data.allergens)}S.value=""},M=W(D,300),ae=async o=>{const t=await x("/profile/update-allergens","POST",{allergens:k.value.filter(l=>l!==o)});t&&(k.value=t.data.allergens)},re=W(async o=>{const t=w[o?"UNFOLLOW_USER":"FOLLOW_USER"](m.value.name);(await x(t,"POST")).status===200&&(L.value+=o?-1:1,s.isFollowing=!o)},300),ie=async o=>{await x(`/recipes/${o.id}/bookmark`,"POST"),o.is_bookmarked=!o.is_bookmarked},ce=o=>z.get(`/recipes/${o}`),de=o=>z.get(`/profile/${o}`);return(o,t)=>(n(),P(we,null,{default:c(()=>[e("div",Ne,[e("img",{src:f.value,alt:"cover art",class:"w-full h-60 object-cover"},null,8,Le),e("div",Re,[e("div",Ge,[e("img",{src:A.value,alt:"profile image",class:"w-24 h-24 rounded-full border-4 border-white object-cover cursor-pointer"},null,8,je),i(s).isOwnProfile?(n(),r("input",{key:0,type:"file",onChange:ne,accept:"image/*",class:"absolute top-0 left-0 opacity-0 cursor-pointer w-full h-full"},null,32)):_("",!0),e("div",De,[e("h1",null,h(i(s).user.name),1)])])]),i(s).isOwnProfile?(n(),r("div",Me,[e("button",{onClick:oe,class:"text-mintGreen hover:text-blue-600"},t[4]||(t[4]=[e("i",{class:"fa-solid fa-gear fa-2x"},null,-1)])),E.value?(n(),r("div",Ve,[e("label",ze,[e("input",{type:"file",onChange:le,accept:"image/*",class:"hidden"},null,32),t[5]||(t[5]=me(" Upload Cover Art "))])])):_("",!0)])):_("",!0)]),e("div",We,[e("div",qe,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[e("div",Ye,[a(Oe,{currentSection:y.value,options:X.value,onSwitchSection:J},null,8,["currentSection","options"])])]),_:1})]),y.value==="public-profile"?(n(),r("div",Ke,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:c(()=>[e("div",Qe,[t[6]||(t[6]=e("div",{class:"col-start-2 font-medium text-2xl mb-6"},[e("h1",null,"Profile")],-1)),e("div",Xe,[i(s).isOwnProfile?(n(),r("button",{key:0,onClick:ee,class:"bg-darkOrange text-mintGreen p-2 rounded"},"Edit Bio")):_("",!0),i(s).auth.user.id!==i(s).user.id?(n(),r("div",He,[e("button",{onClick:t[0]||(t[0]=l=>i(re)(i(s).isFollowing)),class:B([[i(s).isFollowing?"bg-red-500":"bg-blue-500"],"text-mintGreen p-2 rounded"])},h(i(s).isFollowing?"Unfollow":"Follow"),3)])):_("",!0)])]),e("div",Je,[e("div",Ze,[e("div",null,[a(p,{class:"container rounded-lg shadow-xl transform transition-transform h-96"},{default:c(()=>[e("div",et,[e("div",null,[e("div",tt,[t[11]||(t[11]=e("h1",null,"Social Networks",-1)),e("div",ot,[a(i(T),null,{default:c(()=>t[7]||(t[7]=[e("i",{class:"fa-brands fa-facebook text-blue-700"},null,-1)])),_:1}),a(i(T),null,{default:c(()=>t[8]||(t[8]=[e("i",{class:"fa-brands fa-instagram text-red-700"},null,-1)])),_:1}),a(i(T),null,{default:c(()=>t[9]||(t[9]=[e("i",{class:"fa-solid fa-link text-white"},null,-1)])),_:1}),a(i(T),null,{default:c(()=>t[10]||(t[10]=[e("i",{class:"fa-brands fa-youtube text-red-700"},null,-1)])),_:1})])])]),e("div",st,[e("p",null,h(i(s).user.bio||"No bio available"),1)])])]),_:1})]),U.value?(n(),P(Ae,{key:0,bio:F.value,"onUpdate:bio":t[1]||(t[1]=l=>F.value=l),saveBio:te,closeModal:G},null,8,["bio"])):_("",!0),e("div",null,[e("div",lt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform h-96 overflow-hidden overflow-y-scroll"},{default:c(()=>[a(Te,{currentFollowerSection:$.value,options:H.value,onSwitchFollowerSection:Z},null,8,["currentFollowerSection","options"]),e("div",nt,[e("ul",null,[(n(!0),r(C,null,O(Q.value,l=>(n(),r("li",{key:l.id,class:"mb-5"},[(n(),P(ye,{user:l,key:l.id,navigateToUserProfile:de,compact:!0},null,8,["user"]))]))),128))])])]),_:1})])])])])]),_:1})])):_("",!0),y.value==="recipes"?(n(),r("div",at,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},{default:c(()=>[e("div",rt,[e("h1",null,h(i(s).user.name)+"'s Recipes",1)]),e("div",it,[(n(!0),r(C,null,O(v.value,l=>(n(),P(be,{key:l.id,recipe:l,onToggleBookmark:ie,navigateToRecipe:ce,class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 mx-auto"},null,8,["recipe"]))),128))])]),_:1})])):_("",!0),y.value==="account-info"&&i(s).isOwnProfile?(n(),r("div",ct,[e("div",null,[e("div",dt,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform space-y-2 w-3/4 mx-auto"},{default:c(()=>[t[12]||(t[12]=e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Allergies")],-1)),e("div",ut,[pe(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>S.value=l),onKeyup:t[3]||(t[3]=ve((...l)=>i(M)&&i(M)(...l),["enter"])),placeholder:"wheat, soy, eggs",class:"rounded-xl"},null,544),[[ge,S.value]]),e("button",{onClick:D,class:"bg-gradient-to-b from-darkOrange to-darkOrange p-1 px-4 shadow-md transition transform active:translate-x-0 active:translate-y-1 active:shadow-md hover:dark:shadow-orange-500 hover:text-white font-mediump-2 rounded-xl"}," Save ")])]),_:1})]),e("div",ft,[a(p,{class:"p-6 rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[t[13]||(t[13]=e("div",{class:"text-center font-medium text-2xl"},[e("h1",null,"Your Food Allergies")],-1)),e("div",mt,[e("ul",pt,[(n(!0),r(C,null,O(k.value,l=>(n(),r("li",{key:l,class:"relative font-medium bg-darkOrange text-mintGreen rounded-xl p-3 px-7 min-w-[120px] text-center shadow-md"},[e("span",null,h(l.charAt(0).toUpperCase()+l.slice(1)),1),e("button",{onClick:b=>ae(l),class:"absolute top-1 right-1 text-red-600 font-bold"},"X ",8,gt)]))),128))])])]),_:1})])]),e("div",vt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[e("div",wt,[e("div",null,[t[14]||(t[14]=e("div",{class:"text-center"},[e("h3",null,"Account Stats")],-1)),e("div",_t,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[e("div",ht,[e("p",null,"You have created "+h(K.value)+" recipes so far way to go !",1),e("p",null,"You have "+h(L.value)+" followers !",1)])]),_:1})])])])]),_:1})])])):_("",!0),y.value==="settings"&&i(s).isOwnProfile?(n(),r("div",xt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[t[15]||(t[15]=e("div",{class:"text-center mb-5 font-medium text-2xl"},[e("h1",null,"Account Settings")],-1)),e("div",bt,[a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[e("div",yt,[a(xe,{"must-verify-email":u.mustVerifyEmail,status:u.status},null,8,["must-verify-email","status"])])]),_:1}),a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[e("div",kt,[a(he)])]),_:1}),a(p,{class:"rounded-lg shadow-xl transform transition-transform"},{default:c(()=>[e("div",St,[a(_e)])]),_:1})])]),_:1})])):_("",!0)])]),_:1}))}},Dt=ke(Ct,[["__scopeId","data-v-31a4c7ff"]]);export{Dt as default};
